<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="wangwei">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="wangwei">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="wangwei">





  
  
  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>wangwei</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">wangwei</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    
      
    

    <a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories<span class="badge">0</span></a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    
      
    

    <a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives<span class="badge">10</span></a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/xcode10/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/xcode10/" class="post-title-link" itemprop="url">xcode10å‘ã€‘ç”¨xcode10 æ‰“åŒ…ä¸Šä¼ åˆ°AppStoreï¼ŒiOS9 Crash</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:33:17 / Modified: 15:33:50" itemprop="dateCreated datePublished" datetime="2019-04-28T15:33:17+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ç”¨Xcode10 æ‰“åŒ…ä¸Šä¼ åˆ°AppStoreï¼ŒiOS9ç³»ç»Ÿçš„æœºå™¨é¢‘ç¹ Crash; è¿˜æ˜¯è€è€å®å®ç”¨Xcode 9.4.1æ‰“åŒ…å§ï¼Œå‘æ­»äº†ã€‚xcode10.1ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br><img src="https://upload-images.jianshu.io/upload_images/2078724-6691cab26282532e.JPG?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="IMG_0643.JPG"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/cocopodKu/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/cocopodKu/" class="post-title-link" itemprop="url">åˆ›å»ºcocopodsç§æœ‰åº“</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:32:40 / Modified: 15:33:00" itemprop="dateCreated datePublished" datetime="2019-04-28T15:32:40+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>é€šå¸¸æˆ‘ä»¬é¡¹ç›®ä¸­éƒ½æœ‰ä¸€äº›å…¬å…±çš„ç»„ä»¶éœ€è¦æŠ½ç¦»å‡ºæ¥ï¼Œå‡å°‘ä¾èµ–ï¼Œä»Šå¤©è·Ÿå¤§å®¶ä»‹ç»çš„å°±æ˜¯æ€ä¹ˆé€šè¿‡cocopodsåˆ›å»ºç§æœ‰åº“ï¼Œå¼•å…¥åˆ°é¡¹ç›®ä¸­ä¾›å¤§å®¶ä½¿ç”¨ã€‚<br>ä¸€ é¦–å…ˆè¦æ˜ç™½ä¸¤ä¸ªæ¦‚å¿µ:<br>1.code repositoryæ˜¯ä»£ç åº“ã€‚<br>2.spec repositoryæ˜¯é…ç½®ä»“åº“ï¼Œæ‰€æœ‰çš„é…ç½®æŒ‰ç…§åŒ…åã€æºåœ°å€ï¼Œç›¸å…³ä¾èµ–çš„å­˜æ”¾åœ¨è¿™ä¸ªä»“åº“ã€‚è¿™ä¸ªä»“åº“åªç”¨æ¥å­˜æ”¾podspecæ–‡ä»¶ï¼Œä¸å­˜æ”¾ä»£ç ã€‚<br>äºŒ åˆ›å»ºcocopodsä»“åº“ç›¸å…³æ­¥éª¤ï¼š<br>1.åœ¨æœ¬åœ°åˆ›å»ºlibä»“åº“<br>pod  lib create    podsDemoSdk<br>1ï¼‰ç›¸å…³ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/2078724-b37b90b47e07be12.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-02-24 ä¸‹åˆ1.36.22.png"><br>2ï¼‰åˆ›å»ºæ—¶å€™ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ï¼š<br><img src="https://upload-images.jianshu.io/upload_images/2078724-5d088d4376e0da76.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-02-24 ä¸‹åˆ1.35.39.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/2078724-195852b6c15ae626.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-02-24 ä¸‹åˆ1.36.00.png"></p>
<ol start="2">
<li>å°†æœ¬åœ°ä»“åº“å…³è”åˆ°è¿œç«¯gitä»“åº“ æˆ‘ä»¬ç”¨çš„æ˜¯gitlab åˆ›å»ºçš„gitä»“åº“<br>1ï¼‰git add .  #ä¸ä½†å¯ä»¥[è·Ÿå•]æ–‡ä»¶ï¼Œè¿˜å¯ä»¥è·Ÿé€šé…ç¬¦ï¼Œæ›´å¯ä»¥è·Ÿç›®å½•ã€‚ä¸€ä¸ªç‚¹å°±æŠŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æœªè¿½è¸ªçš„æ–‡ä»¶å…¨éƒ¨addäº†ï¼Œæ³¨æ„ç©ºæ ¼<br>2ï¼‰git commit -m â€œæ³¨é‡Šâ€ #æŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“<br>3ï¼‰git remote add origin  è¿œç¨‹ä»“åº“åœ°å€              #æœ¬åœ°å…³è”è¿œç¨‹ä»“åº“<br>4ï¼‰git push -u origin master #æŠŠæœ¬åœ°åº“çš„æ‰€æœ‰å†…å®¹æ¨é€åˆ°è¿œç¨‹åº“ä¸Šï¼ˆç¬¬ä¸€æ¬¡éœ€è¦åŠ -uï¼Œåé¢å°±ä¸ç”¨åŠ äº†ï¼‰</li>
<li>å°†ç›¸å…³sdk ä»£ç æ”¾åœ¨ podsDemoSdk/Classes ç›®å½•ä¸‹<br>4.é…ç½®ç›¸å…³spec æ–‡ä»¶<br><img src="https://upload-images.jianshu.io/upload_images/2078724-a8d942bc6771a1ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>é…ç½®ç›¸å…³è¿œç¨‹ä»“åº“åœ°å€å’Œç›¸å…³å†…å®¹ï¼ŒæŒ‰ç€å›¾ä¸­æ ¼å¼é…å°±è¡Œäº†ã€‚</li>
<li><p>éªŒè¯podspecçš„æœ‰æ•ˆæ€§ï¼Œæ‰“å¼€ç»ˆç«¯ cd åˆ°podsDemoSdkçš„ç›®å½•ä¸­<br>æ¥ç€è¿è¡Œpod lib lint<br>å¦‚æœæœ‰è­¦å‘Šï¼Œä¼šå¯¼è‡´æ— æ³•é€šè¿‡ï¼Œéœ€è¦æ·»åŠ â€“allow-warnings<br>å¦‚æœä½¿ç”¨äº†cå‡½æ•°ç›¸å…³çš„ï¼Œéœ€è¦æ·»åŠ â€“use-libraries<br>æ˜¾ç¤ºpass å­—çœ¼ éªŒè¯é€šè¿‡åï¼ŒæŠŠä»£ç æäº¤åˆ°ä»“åº“å³å¯<br>5.æŠŠä»£ç æäº¤åˆ°ä»“åº“å³å¯<br>git add -A<br>git commit -m â€œadd pod filesâ€<br>git remote add origin è¿œç¨‹ä»“åº“     //è¿æ¥è¿œç¨‹githubé¡¹ç›®<br>git tag â€˜0.1.0â€™  //è¿™é‡Œçš„ç‰ˆæœ¬å·æ³¨æ„è¦å’Œpodspecæ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ç»Ÿä¸€<br>git push â€“tags        //å°†æœ¬åœ°tagæ›´æ–°åˆ°githubé¡¹ç›®ä¸Šå»<br>git push origin master    //å°†æœ¬åœ°é¡¹ç›®æ›´æ–°åˆ°githubé¡¹ç›®ä¸Šå»</p>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªspecç§æœ‰ä»“åº“<br>ç°åœ¨GitLabä¸Šé¢åˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“ï¼Œç”¨æ¥å­˜æ”¾ç§æœ‰ä¾èµ–ä»£ç åº“çš„é…ç½®<br>åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼š<br>pod repo add  podsDemoSpecs specä»“åº“åœ°å€</p>
</li>
</ol>
<p>ä¹Ÿå°±æ˜¯åœ¨~/.cocoapods/repoç›®å½•ä¸‹æ·»åŠ äº†ä¸€ä¸ªä»¥ä½ çš„ç§æœ‰repoä¸ºåçš„æ–‡ä»¶å¤¹</p>
<p>ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°å¾—åˆ°æˆ‘ä»¬è‡ªå·±çš„ç§æœ‰ä»“åº“ podsDemoSpecs ï¼Œè¿™æ˜¯ä¸€ä¸ªç©ºçš„ä»“åº“</p>
<p>7.å…³è”ä»£ç åº“å’Œé…ç½®ä»“åº“<br>pod repo push podsDemoSpecs podsDemoSdk.podspec â€“use-libraries â€“allow-warnings</p>
<p>è‡³æ­¤ä»“åº“å·²ç»åˆ›å»ºå®Œæˆ</p>
<p>ä¸‰ï¼Œä¸‹é¢æ˜¯åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨ï¼Œç›´æ¥åœ¨podfileæ–‡ä»¶ä¸­é…ç½®ç›¸å…³ä¿¡æ¯å°±å¥½ï¼Œpod installå³å¯ </p>
<p>è°¢è°¢ï¼Œå¦‚æœä¸è¶³ï¼Œè¯·æŒ‡æ­£è°¢è°¢!</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/é™æ€åº“/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/é™æ€åº“/" class="post-title-link" itemprop="url">åˆ›å»ºé™æ€ç§æœ‰åº“</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:31:25 / Modified: 15:32:08" itemprop="dateCreated datePublished" datetime="2019-04-28T15:31:25+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ä»‹ç»äº†Cocoapodsç§æœ‰åº“çš„åˆ›å»º<br>æœ‰äº›æ—¶å€™æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åˆ«äººå¼•ç”¨å’±ä»¬çš„åº“çš„æ—¶å€™çœ‹è§æˆ‘ä»¬çš„ç›¸å…³å®ç°ä»£ç ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å°†ç›¸å…³ä»£ç ï¼Œæ‰“æˆé™æ€åº“ã€‚<br>ç¬¬ä¸€ .aå’Œ.framworkçš„åŒºåˆ«ï¼š<br>iOSé™æ€åº“å½¢å¼å’ŒåŠ¨æ€åº“å½¢å¼ï¼š<br>é™æ€åº“ï¼š.aå’Œ.framework<br>åŠ¨æ€åº“ï¼š.dylibå’Œ.framework<br>.aæ˜¯ä¸€ä¸ªçº¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ.frameworkä¸­é™¤äº†æœ‰äºŒè¿›åˆ¶æ–‡ä»¶å¤–è¿˜æœ‰èµ„æºæ–‡ä»¶ã€‚<br>.aæ–‡ä»¶ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œè‡³å°‘è¦æœ‰.hæ–‡ä»¶é…åˆï¼Œ.frameworkæ–‡ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚<br>.a + .h + sourceFile = .framework<br>ç¬¬äºŒ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œé™æ€åº“çš„æ‰“åŒ…ï¼Œ<br>1æ˜¯æ‰‹åŠ¨æ‰“åŒ…æ¯”è¾ƒéº»çƒ¦ï¼Œç½‘ä¸Šæœ‰å¥½å¤šç›¸å…³æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†<br>2å‘½ä»¤è¡Œæ‰“åŒ…ï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œä¸€æ¡å‘½ä»¤å³å¯<br>1ï¼‰å®‰è£…æ‰“åŒ…æ’ä»¶<br>ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤<br>sudo gem install cocoapods-packager<br>2ï¼‰è¿›å…¥ç§æœ‰åº“ç›®å½• ç„¶åå°†æºç å¯¼å…¥classes ç›®å½•ä¸‹  ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤<br>pod package demo.podspec â€“library â€“force<br>å…¶ä¸­â€“libraryæŒ‡å®šæ‰“åŒ…æˆ.aæ–‡ä»¶ï¼Œå¦‚æœä¸å¸¦ä¸Šå°†ä¼šæ‰“åŒ…æˆ.frameworkæ–‡ä»¶ã€‚â€“forceæ˜¯æŒ‡å¼ºåˆ¶è¦†ç›–ã€‚<br>è¿™ä¸ªæ—¶å€™ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªæ–‡ä»¶å¤¹<br><img src="https://upload-images.jianshu.io/upload_images/2078724-580fef30275241cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-02-24 ä¸‹åˆ2.10.29.png"><br>ç„¶åå°†frameworkæ–‡ä»¶å¤åˆ¶åˆ°aesEncrypts/Framework/ä¸‹é¢<br>ç¬¬ä¸‰ é…ç½®ç›¸å…³ç§æœ‰åº“ä¿¡æ¯<br>1ï¼‰å°†ç›¸å…³frameworkå¯¼å…¥ç§æœ‰åº“ç›®å½•ä¸‹<br>2ï¼‰é…ç½®specæ–‡ä»¶<br><img src="https://upload-images.jianshu.io/upload_images/2078724-6bdc533000be861b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-02-24 ä¸‹åˆ2.13.58.png"></p>
</blockquote>
<p>ç®¡ç†.framework<br>è·Ÿç®¡ç†.aç±»ä¼¼ï¼ŒåŒæ ·æ˜¯ç”Ÿæˆé€šç”¨frameworkã€‚åªä¸è¿‡podspecæœ‰ç‚¹ä¸åŒã€‚.aæ˜¯s.vendored_librariesï¼Œ.frameworkæ˜¯s.vendored_frameworksã€‚<br>3ï¼‰.tagæ ‡è®°,å¹¶ä¸”ä¸Šä¼ <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/// ç¬¬ä¸€æ¬¡éœ€è¦åœ¨å‰é¢åŠ ä¸€ä¸ªv</span><br><span class="line">git tag &quot;v1.0.0&quot;</span><br><span class="line">git push --tags</span><br></pre></td></tr></table></figure></p>
<p>6.éªŒè¯.podspec</p>
<p>æ–¹å¼ä¸€<br>// åŠ ä¸Šâ€“verboseéªŒè¯å¤±è´¥ä¼šæ˜¾ç¤ºè¯¦ç»†çš„æŠ¥é”™ä¿¡æ¯<br>pod spec lint aesEncrypts.podspec â€“verbose<br>æ–¹å¼äºŒ<br>pod spec lint<br>7.å‘å¸ƒè‡ªå·±çš„.podspecåˆ°cocoapods<br>pod trunk push aesEncrypts.podspec<br>å¦‚æœæœ‰è­¦å‘Šç”¨:pod trunk push aesEncrypts.podspec â€“allow-warnings</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2078724-392c5880c7d35c51.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-02-20 ä¸Šåˆ10.17.05.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/2078724-3b60db622439bce6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-02-20 ä¸Šåˆ10.17.28.png"></p>
<blockquote>
<p>æ³¨æ„ï¼šæ³¨æ„cocopods ç‰ˆæœ¬ ä¸è¦ç”¨beta ç‰ˆæœ¬è¿›è¡Œåˆ›å»ºï¼Œè¦ä¸lib éªŒè¯å¯ä»¥é€šè¿‡ï¼Œä½†æ˜¯spec æ–¹å¼éªŒè¯ä¼šå‡ºé”™ã€‚<br>pod specç›¸å¯¹äºpod lib ä¼šæ›´ä¸ºç²¾ç¡®ï¼Œpod libç›¸å½“äºåªéªŒè¯ä¸€ä¸ªæœ¬åœ°ä»“åº“ï¼Œpod specä¼šåŒæ—¶éªŒè¯æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ã€‚ å¦‚æœspecæ–‡ä»¶ä¸é€šè¿‡ï¼Œspec æ–‡ä»¶æ˜¯ä¸èƒ½ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/fastlane-test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/fastlane-test/" class="post-title-link" itemprop="url">ç»“åˆfastlane ç»„ä»¶è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:31:11 / Modified: 15:31:49" itemprop="dateCreated datePublished" datetime="2019-04-28T15:31:11+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>1.Xcodeåˆ›å»ºä¸€ä¸ªå«æœ‰Unit Testsçš„é¡¹ç›®<br>1ï¼‰å•å…ƒæµ‹è¯•targetè®¾ç½®<br>infoä¸­æ·»åŠ testsï¼Œoptionsä¸­å‹¾é€‰Gather coverageæ¡†ã€‚xcode9.2å’Œxcode9.3ä½ç½®ä¸å¤ªä¸€æ ·ï¼Œä¸‹é¢çš„å›¾ç‰‡æ˜¯xcode9.3çš„é…ç½® è¿™ä¸ªæ˜¯æµ‹è¦†ç›–ç‡ç”¨çš„<br>2.å®‰è£…fastlane<br>1ï¼‰sudo gem install fastlane -NVæˆ–æ˜¯brew cask install fastlaneæˆ‘è¿™é‡Œä½¿ç”¨gemå®‰è£…çš„<br>2ï¼‰å®‰è£…å®Œäº†æ‰§è¡Œfastlane â€“versionï¼Œç¡®è®¤ä¸‹æ˜¯å¦å®‰è£…å®Œæˆå’Œå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬å·ã€‚ã€&gt;3.åˆå§‹åŒ–Fastlane<br>1ï¼‰cdåˆ°ä½ çš„é¡¹ç›®ç›®å½•æ‰§è¡Œ<br>2ï¼‰fastlane init<br>åˆå§‹åŒ–æˆåŠŸåä¼šåœ¨å½“å‰å·¥ç¨‹ç›®å½•ç”Ÿæˆä¸€ä¸ªfastlaneæ–‡ä»¶å¤¹<br>Appfileä¸»è¦å­˜æ”¾Appçš„apple_id team_id app_identifierç­‰ä¿¡æ¯<br>Deliverfileä¸­ä¸ºå‘å¸ƒçš„é…ç½®ä¿¡æ¯ï¼Œä¸€èˆ¬æƒ…å†µç”¨ä¸åˆ°ã€‚<br>Fastfileæ˜¯æˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬çš„å·¥ä½œæ–‡ä»¶ã€‚<br>4) æ·»åŠ ç»„ä»¶<br>fastlane add_plugin xcpretty_report ç”¨äºç”Ÿæˆæµ‹è¯•æŠ¥å‘Š<br>5ï¼‰é…ç½®Fastfileç›¸å…³ä¿¡æ¯<br><code>`</code><br>default_platform(:ios)</p>
</blockquote>
<p>platform :ios do</p>
<p>desc â€œè‡ªåŠ¨åŒ–æµ‹è¯•â€</p>
<p>lane :unittest do<br>UI.message(â€œstart  xcodebuildâ€)<br>xcodebuild(<br>test: true,<br>scheme: â€œquickDemoâ€,<br>workspace: â€œquickDemo.xcworkspaceâ€,<br>destination: â€œplatform=iOS Simulator,name=iPhone XR,OS=12.1â€,<br>)<br>UI.message(â€œsuccess  xcodebuildâ€)</p>
<p>xcpretty_report(<br>buildlog_path: â€˜fastlaneâ€™,<br>output_path: â€˜fastlane/reportsâ€™,<br>use_json_formatter: true<br>)  </p>
<h1 id="gym"><a href="#gym" class="headerlink" title="gym("></a>gym(</h1><h1 id="xcpretty-report-html-â€tests-htmlâ€"><a href="#xcpretty-report-html-â€tests-htmlâ€" class="headerlink" title="xcpretty_report_html:â€tests.htmlâ€,"></a>xcpretty_report_html:â€tests.htmlâ€,</h1><h1 id><a href="#" class="headerlink" title=")"></a>)</h1><p>UI.message(â€œstart  xcovâ€)<br>xcov(<br>scheme: â€œquickDemoâ€,<br>workspace: â€œquickDemo.xcworkspaceâ€,<br>html_report: â€œtrueâ€,<br>json_report: â€œtrueâ€,<br>output_directory:â€quickDemoesssâ€<br>)<br>UI.message(â€œsuccess  xcovâ€)</p>
<p>desc â€œè¯»å–è¦†ç›–ç‡â€<br>file = File.read(File.expand_path(â€œ/Users/edz/Desktop/quickDemo/quickDemoesss/report.jsonâ€))<br>if file<br>data = JSON.parse(file)<br>UI.message(data)<br>UI.message(data[â€œcoverageâ€])<br>else<br>UI.error(â€œUnable to open file!â€)<br>return<br>end<br>end</p>
<p>end<br><code>`</code>  </p>
<blockquote>
<p>6 æ‰§è¡Œ fastlane   unittest</p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/uitouch/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/uitouch/" class="post-title-link" itemprop="url">UItouchäº‹ä»¶è¢«tableviewæ‹¦æˆª</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:27:46 / Modified: 15:30:47" itemprop="dateCreated datePublished" datetime="2019-04-28T15:27:46+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>æœ€è¿‘åšé¡¹ç›®ç”¨åˆ°äº†æ‰‹å†™ç­¾åçš„åŠŸèƒ½ï¼Œæ‰‹å†™ç­¾åçš„viewæ˜¯é€šè¿‡UItouchç›¸å…³æ–¹æ³•ç”»çº¿å®ç°çš„ï¼Œå› ä¸ºé¡µé¢UIæ˜¯åˆ—è¡¨å½¢å¼ï¼Œæ‰‹å†™ç­¾åview éœ€è¦æ·»åŠ åˆ°tableviewçš„footviewä¸Šï¼Œè¿™ä¸ªæ—¶å€™å°±å‡ºç°äº†é—®é¢˜ï¼Œæ‰‹å†™ç­¾åviewçš„touchè¢«tableviewæ‹¦æˆªäº†ï¼Œè¿™ä¸ªæ—¶å€™å†å»æ“ä½œview ç­¾åçš„æ—¶å€™ æ˜¯ä¸èƒ½æˆåŠŸå‘¢ï¼Œè€Œä¸”é¡µé¢ä¼šæ»šåŠ¨ã€‚ ä¸‹é¢æˆ‘è®°å½•ä¸€ä¸‹æˆ‘çš„å¤„ç†æ–¹å¼<br>1.ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºåƒç½‘ä¸Šçš„æ–¹å¼ï¼Œç»™tableviewåˆ›å»ºä¸€ä¸ªå­ç±»ç„¶åå¼•å…¥touch æ–¹æ³•ï¼š<br>refer <a href="https://blog.csdn.net/qq_42839789/article/details/81501832" target="_blank" rel="noopener">https://blog.csdn.net/qq_42839789/article/details/81501832</a><br>ä½†æ˜¯viewçš„touch ä¼šè¦†ç›–tableviewtouch å¹¶ä¸èƒ½è§£å†³é—®é¢˜ã€‚<br>2.è¿™ä¸ªæ—¶å€™æˆ‘æƒ³åˆ°hittest æ–¹æ³•é€šè¿‡äº‹ä»¶å“åº”æœºåˆ¶ï¼Œåˆ¤æ–­è§¦æ‘¸çš„viewæ˜¯ä¸æ˜¯ç­¾åview å¦‚æœæ˜¯è®©tableviewæš‚æ—¶åœæ­¢æ»šåŠ¨ï¼Œå¦‚æœä¸æ˜¯æ­£å¸¸æ»šåŠ¨ã€‚<br>å…·ä½“å®ç°å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line"></span><br><span class="line">@interface WYTouchTableView : UITableView</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">#import &quot;WYTouchTableView.h&quot;</span><br><span class="line">#import &quot;HJSignatureView.h&quot;</span><br><span class="line">@implementation WYTouchTableView</span><br><span class="line"></span><br><span class="line">- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event</span><br><span class="line">&#123;</span><br><span class="line">UIView *viewReturn =[super hitTest:point withEvent:event];</span><br><span class="line">//åœ¨touchViewåŒºåŸŸ</span><br><span class="line">if ([viewReturn isKindOfClass:[HJSignatureView class]]) &#123;</span><br><span class="line">self.scrollEnabled = NO;</span><br><span class="line">return viewReturn;</span><br><span class="line">&#125;else&#123;</span><br><span class="line">self.scrollEnabled = YES;</span><br><span class="line">&#125;</span><br><span class="line">//ä¸åœ¨touchViewåŒºåŸŸï¼Œæ­£å¸¸æ“ä½œ</span><br><span class="line">return viewReturn;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure></p>
</blockquote>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/muitiple-error/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/muitiple-error/" class="post-title-link" itemprop="url">multiple commands produce ''    æ—¥å¸¸errorè®°è½½</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:27:22 / Modified: 15:30:24" itemprop="dateCreated datePublished" datetime="2019-04-28T15:27:22+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä¸‹è½½åˆ«äººdemo æˆ–è€…æ—¥å¸¸å†™é¡¹ç›®ä¸­ä¼šé‡åˆ°ç±»ä¼¼å¦‚ä¸‹çš„bugï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2078724-d0ff1f851fed80d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-04-19 ä¸‹åˆ3.50.36.png"><br>è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œåˆ é™¤info.plist ç„¶åcommand+R å…è®¸å³å¯ å®Œç¾ï¼š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2078724-e1661de22ec2bf8b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-04-19 ä¸‹åˆ3.50.53.png"></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/aduiomix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/aduiomix/" class="post-title-link" itemprop="url">iOSéŸ³é¢‘åˆå¹¶çš„å¤šç§æ–¹å¼</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:27:04 / Modified: 15:30:00" itemprop="dateCreated datePublished" datetime="2019-04-28T15:27:04+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>æœ€è¿‘åœ¨åšéŸ³é¢‘åˆå¹¶è¿™å—éœ€æ±‚ï¼Œç„¶åé‡è§äº†å‡ ç§å½¢å¼ï¼Œè¿™é‡Œåšä¸€ä¸ªæ€»ç»“ã€‚</p>
</blockquote>
<h2 id="ç¬¬ä¸€ç§-å¯ç½‘ç»œå¯æœ¬åœ°-ï¼Œå¯è°ƒæ•´éŸ³é‡ï¼ŒèŒƒå›´ç­‰-å®šåˆ¶åŒ–è¿˜æ¯”è¾ƒé«˜"><a href="#ç¬¬ä¸€ç§-å¯ç½‘ç»œå¯æœ¬åœ°-ï¼Œå¯è°ƒæ•´éŸ³é‡ï¼ŒèŒƒå›´ç­‰-å®šåˆ¶åŒ–è¿˜æ¯”è¾ƒé«˜" class="headerlink" title="ç¬¬ä¸€ç§ å¯ç½‘ç»œå¯æœ¬åœ° ï¼Œå¯è°ƒæ•´éŸ³é‡ï¼ŒèŒƒå›´ç­‰ å®šåˆ¶åŒ–è¿˜æ¯”è¾ƒé«˜"></a>ç¬¬ä¸€ç§ å¯ç½‘ç»œå¯æœ¬åœ° ï¼Œå¯è°ƒæ•´éŸ³é‡ï¼ŒèŒƒå›´ç­‰ å®šåˆ¶åŒ–è¿˜æ¯”è¾ƒé«˜</h2><blockquote>
<p>1.åŸºæœ¬ç±»ä»‹ç»<br>referï¼š<a href="https://docs.microsoft.com/en-us/dotnet/api/avfoundation.avcomposition?view=xamarin-ios-sdk-12" target="_blank" rel="noopener">https://docs.microsoft.com/en-us/dotnet/api/avfoundation.avcomposition?view=xamarin-ios-sdk-12</a></p>
<ul>
<li>AVAsset åª’ä½“ä¿¡æ¯</li>
<li>AVURLAsset æ ¹æ®URLè·¯å¾„åˆ›å»ºçš„åª’ä½“ä¿¡æ¯</li>
<li>AVAssetTrack èµ„æºè½¨é“ï¼ŒåŒ…æ‹¬éŸ³é¢‘è½¨é“å’Œè§†é¢‘è½¨é“</li>
<li>AVMutableAudioMixInputParameterséŸ³é¢‘æ“ä½œå‚æ•°</li>
<li>AVMutableComposition   ç»§æ‰¿è‡ªAVCompositionï¼Œç”¨äºä»ç°æœ‰Assetåˆ›å»ºæ–°åˆæˆçš„å¯å˜å¯¹è±¡ã€‚åŒ…å«å¤šä¸ªè½¨é“çš„åª’ä½“ä¿¡æ¯ï¼Œå¯ä»¥æ·»åŠ ã€åˆ é™¤è½¨é“</li>
<li>AVAssetExportSession å¯¼å‡º</li>
</ul>
</blockquote>
<h4 id="å…·ä½“å®ç°å¦‚ä¸‹ï¼š"><a href="#å…·ä½“å®ç°å¦‚ä¸‹ï¼š" class="headerlink" title="å…·ä½“å®ç°å¦‚ä¸‹ï¼š"></a>å…·ä½“å®ç°å¦‚ä¸‹ï¼š</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - éŸ³é¢‘ä¸éŸ³é¢‘çš„åˆå¹¶</span><br><span class="line">+ (void)mixOriginalAudio:(NSURL *)originalAudioPath</span><br><span class="line">originalAudioVolume:(float)originalAudioVolume</span><br><span class="line">bgAudioPath:(NSURL *)bgAudioPath</span><br><span class="line">bgAudioVolume:(float)bgAudioVolume</span><br><span class="line">outPutFileName:(NSString *)fileName</span><br><span class="line">completionBlock:(CompletionBlock)completionBlock</span><br><span class="line">&#123;</span><br><span class="line">if (originalAudioPath == nil) &#123;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">if (bgAudioPath == nil) &#123;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">if (originalAudioVolume &gt; 1.0) &#123;</span><br><span class="line">originalAudioVolume = 1.0f;</span><br><span class="line">&#125;</span><br><span class="line">if (originalAudioVolume &lt; 0) &#123;</span><br><span class="line">originalAudioVolume = 0.0f;</span><br><span class="line">&#125;</span><br><span class="line">if (bgAudioVolume &gt; 1.0) &#123;</span><br><span class="line">bgAudioVolume = 1.0f;</span><br><span class="line">&#125;</span><br><span class="line">if (bgAudioVolume &lt; 0) &#123;</span><br><span class="line">bgAudioVolume = 0.0f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</span><br><span class="line"></span><br><span class="line">AVURLAsset *originalAudioAsset = [AVURLAsset assetWithURL:originalAudioPath];</span><br><span class="line">AVURLAsset *bgAudioAsset = [AVURLAsset assetWithURL:bgAudioPath];</span><br><span class="line"></span><br><span class="line">AVMutableComposition *compostion = [AVMutableComposition composition];</span><br><span class="line"></span><br><span class="line">AVMutableCompositionTrack *originalAudio = [compostion addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:0];</span><br><span class="line">[originalAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, originalAudioAsset.duration) ofTrack:[originalAudioAsset tracksWithMediaType:AVMediaTypeAudio].firstObject atTime:kCMTimeZero error:nil];</span><br><span class="line"></span><br><span class="line">AVMutableCompositionTrack *bgAudio = [compostion addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:0];</span><br><span class="line"></span><br><span class="line">[bgAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, originalAudioAsset.duration) ofTrack:[bgAudioAsset tracksWithMediaType:AVMediaTypeAudio].firstObject atTime:kCMTimeZero error:nil];</span><br><span class="line">//æ’­æ”¾é€Ÿç‡ä¼šå—å½±å“</span><br><span class="line">NSUInteger originalAudioAssetTotalSeconds = CMTimeGetSeconds(originalAudioAsset.duration);</span><br><span class="line">NSUInteger bgAudioAssetTotalSeconds = CMTimeGetSeconds(bgAudioAsset.duration);</span><br><span class="line">if (originalAudioAssetTotalSeconds&gt;bgAudioAssetTotalSeconds) &#123;</span><br><span class="line">[bgAudio scaleTimeRange:CMTimeRangeMake(kCMTimeZero, bgAudioAsset.duration) toDuration:originalAudioAsset.duration];</span><br><span class="line">&#125;</span><br><span class="line">/** å¾—åˆ°å¯¹åº”è½¨é“ä¸­çš„éŸ³é¢‘å£°éŸ³ä¿¡æ¯ï¼Œå¹¶æ›´æ”¹ */</span><br><span class="line">AVMutableAudioMixInputParameters *originalAudioParameters = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:originalAudio];</span><br><span class="line">[originalAudioParameters setVolume:originalAudioVolume atTime:kCMTimeZero];</span><br><span class="line"></span><br><span class="line">AVMutableAudioMixInputParameters *bgAudioParameters = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:bgAudio];</span><br><span class="line">[bgAudioParameters setVolume:bgAudioVolume atTime:kCMTimeZero];</span><br><span class="line"></span><br><span class="line">/** èµ‹ç»™å¯¹åº”çš„ç±» */</span><br><span class="line">AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];</span><br><span class="line">audioMix.inputParameters = @[ originalAudioParameters, bgAudioParameters ];</span><br><span class="line"></span><br><span class="line">AVAssetExportSession *session = [[AVAssetExportSession alloc] initWithAsset:compostion presetName:AVAssetExportPresetAppleM4A];</span><br><span class="line"></span><br><span class="line">/** è®¾ç½®è¾“å‡ºè·¯å¾„ */</span><br><span class="line">NSURL *outputPath = [self exporterAudioPathWithFileName:fileName];</span><br><span class="line"></span><br><span class="line">session.audioMix = audioMix;</span><br><span class="line">session.outputURL = outputPath;</span><br><span class="line">session.outputFileType = AVFileTypeAppleM4A;</span><br><span class="line">session.shouldOptimizeForNetworkUse = YES;</span><br><span class="line"></span><br><span class="line">[session exportAsynchronouslyWithCompletionHandler:^&#123;</span><br><span class="line"></span><br><span class="line">dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line"></span><br><span class="line">switch ([session status]) &#123;</span><br><span class="line">case AVAssetExportSessionStatusFailed: &#123;</span><br><span class="line">NSLog(@&quot;åˆæˆå¤±è´¥ï¼š%@&quot;, [[session error] description]);</span><br><span class="line">completionBlock(NO, outputPath);</span><br><span class="line">&#125; break;</span><br><span class="line"></span><br><span class="line">case AVAssetExportSessionStatusCancelled: &#123;</span><br><span class="line">completionBlock(NO, outputPath);</span><br><span class="line">&#125; break;</span><br><span class="line"></span><br><span class="line">case AVAssetExportSessionStatusCompleted: &#123;</span><br><span class="line">completionBlock(YES, outputPath);</span><br><span class="line"></span><br><span class="line">&#125; break;</span><br><span class="line"></span><br><span class="line">default: &#123;</span><br><span class="line">completionBlock(NO, outputPath);</span><br><span class="line">&#125; break;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="âš ï¸å‹ç¼©æ—¶é•¿"><a href="#âš ï¸å‹ç¼©æ—¶é•¿" class="headerlink" title="âš ï¸å‹ç¼©æ—¶é•¿"></a>âš ï¸å‹ç¼©æ—¶é•¿</h6><ul>
<li>æ›´æ”¹ç»™å®šæ—¶é—´èŒƒå›´å†…æ‰€æœ‰è½¨é“çš„æ—¶é•¿ã€‚<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- (void)scaleTimeRange:(CMTimeRange)timeRange</span><br><span class="line">toDuration:(CMTime)duration;</span><br><span class="line">å‚æ•°timeRange:è¦ç¼©æ”¾çš„åˆæˆè½¨é“çš„æ—¶é—´èŒƒå›´ã€‚</span><br><span class="line">å‚æ•°duration:æ–°çš„æ—¶é•¿ã€‚</span><br><span class="line"></span><br><span class="line">å—ç¼©æ”¾æ“ä½œå½±å“çš„æ¯ä¸ªè½¨é“æ®µå°†ä»¥ç­‰äºå…¶ç»“æœæ—¶é—´æ˜ å°„çš„source.duration/target.durationçš„é€Ÿç‡å‘ˆç°ã€‚</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="âš ï¸è®¾ç½®èƒŒæ™¯éŸ³ä¹æ—¶é•¿å’Œæ’å…¥æ—¶é—´"><a href="#âš ï¸è®¾ç½®èƒŒæ™¯éŸ³ä¹æ—¶é•¿å’Œæ’å…¥æ—¶é—´" class="headerlink" title="âš ï¸è®¾ç½®èƒŒæ™¯éŸ³ä¹æ—¶é•¿å’Œæ’å…¥æ—¶é—´"></a>âš ï¸è®¾ç½®èƒŒæ™¯éŸ³ä¹æ—¶é•¿å’Œæ’å…¥æ—¶é—´</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[bgAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, originalAudioAsset.duration) ofTrack:[bgAudioAsset tracksWithMediaType:AVMediaTypeAudio].firstObject atTime:kCMTimeZero error:nil];</span><br><span class="line">å› ä¸ºæˆ‘çš„éœ€æ±‚æ˜¯åŠ å…¥èƒŒæ™¯éŸ³ä¹ç»™å½•éŸ³ï¼Œæ‰€ä»¥å°†èƒŒæ™¯éŸ³ä¹ä»å¤´æ’å…¥kCMTimeZero æ’å…¥æ—¶é•¿ä¸ºå½•éŸ³çš„æ—¶é•¿ originalAudioAsset.duration</span><br></pre></td></tr></table></figure>
<h6 id="âš ï¸æ³¨æ„å¯¼å‡ºæ ¼å¼"><a href="#âš ï¸æ³¨æ„å¯¼å‡ºæ ¼å¼" class="headerlink" title="âš ï¸æ³¨æ„å¯¼å‡ºæ ¼å¼"></a>âš ï¸æ³¨æ„å¯¼å‡ºæ ¼å¼</h6><p>é¦–å…ˆæ˜¯è¾“å‡ºè·¯å¾„,åˆ‡è®°åˆ‡è®°è¿™é‡Œçš„åç¼€ä¸€å®šè¦å’Œä¸Šé¢é€‰æ‹©çš„å‘¼åº”,æ¯”å¦‚æˆ‘å†™çš„æ ¼å¼ä¸ºAVAssetExportPresetAppleM4Aé‚£ä¹ˆæˆ‘çš„æ–‡ä»¶åç¼€å°±éœ€è¦ä¸º.m4a,å¦‚æœç”¨.MP3è¿™ç§çš„è¯æ˜¯æ— æ³•æ­£ç¡®ç”Ÿæˆå‡ºæ–‡ä»¶çš„,æœ‰å¯èƒ½ä¼šå‡ºç°ç©ºæ–‡ä»¶çš„å­˜åœ¨.ä¸€å®šè¦æ³¨æ„!!!</p>
<h6 id="âš ï¸ä¼ å…¥ç½‘ç»œé“¾æ¥çš„æ—¶å€™-éœ€è¦å°†ç½‘ç»œé“¾æ¥ä¸‹è½½ä¸‹æ¥è½¬æˆæœ¬åœ°è·¯å¾„è¿›è¡Œä¼ å…¥ã€‚"><a href="#âš ï¸ä¼ å…¥ç½‘ç»œé“¾æ¥çš„æ—¶å€™-éœ€è¦å°†ç½‘ç»œé“¾æ¥ä¸‹è½½ä¸‹æ¥è½¬æˆæœ¬åœ°è·¯å¾„è¿›è¡Œä¼ å…¥ã€‚" class="headerlink" title="âš ï¸ä¼ å…¥ç½‘ç»œé“¾æ¥çš„æ—¶å€™ éœ€è¦å°†ç½‘ç»œé“¾æ¥ä¸‹è½½ä¸‹æ¥è½¬æˆæœ¬åœ°è·¯å¾„è¿›è¡Œä¼ å…¥ã€‚"></a>âš ï¸ä¼ å…¥ç½‘ç»œé“¾æ¥çš„æ—¶å€™ éœ€è¦å°†ç½‘ç»œé“¾æ¥ä¸‹è½½ä¸‹æ¥è½¬æˆæœ¬åœ°è·¯å¾„è¿›è¡Œä¼ å…¥ã€‚</h6><p>referï¼š <a href="https://github.com/Anny-github/AudioPlayerManager" target="_blank" rel="noopener">https://github.com/Anny-github/AudioPlayerManager</a></p>
<h2 id="ç¬¬äºŒç§-æœ¬åœ°éŸ³é¢‘åˆå¹¶ï¼Œå¯ä»¥è°ƒæ•´éŸ³é‡"><a href="#ç¬¬äºŒç§-æœ¬åœ°éŸ³é¢‘åˆå¹¶ï¼Œå¯ä»¥è°ƒæ•´éŸ³é‡" class="headerlink" title="ç¬¬äºŒç§ æœ¬åœ°éŸ³é¢‘åˆå¹¶ï¼Œå¯ä»¥è°ƒæ•´éŸ³é‡"></a>ç¬¬äºŒç§ æœ¬åœ°éŸ³é¢‘åˆå¹¶ï¼Œå¯ä»¥è°ƒæ•´éŸ³é‡</h2><p><a href="https://github.com/daybreak1024/ZLMMixAudio" target="_blank" rel="noopener">https://github.com/daybreak1024/ZLMMixAudio</a></p>
<h2 id="ç¬¬ä¸‰ç§-å¯ä»¥ç½‘ç»œæˆ–è€…æœ¬åœ°åˆå¹¶ï¼Œä½†æ˜¯æ— æ³•å®šåˆ¶åŒ–ï¼Œå› ä¸ºç”¨çš„åˆ«äººçš„é™æ€åº“ğŸ˜¢"><a href="#ç¬¬ä¸‰ç§-å¯ä»¥ç½‘ç»œæˆ–è€…æœ¬åœ°åˆå¹¶ï¼Œä½†æ˜¯æ— æ³•å®šåˆ¶åŒ–ï¼Œå› ä¸ºç”¨çš„åˆ«äººçš„é™æ€åº“ğŸ˜¢" class="headerlink" title="ç¬¬ä¸‰ç§ å¯ä»¥ç½‘ç»œæˆ–è€…æœ¬åœ°åˆå¹¶ï¼Œä½†æ˜¯æ— æ³•å®šåˆ¶åŒ–ï¼Œå› ä¸ºç”¨çš„åˆ«äººçš„é™æ€åº“ğŸ˜¢"></a>ç¬¬ä¸‰ç§ å¯ä»¥ç½‘ç»œæˆ–è€…æœ¬åœ°åˆå¹¶ï¼Œä½†æ˜¯æ— æ³•å®šåˆ¶åŒ–ï¼Œå› ä¸ºç”¨çš„åˆ«äººçš„é™æ€åº“ğŸ˜¢</h2><p><a href="https://github.com/QuintGao/GKDubbingDemo" target="_blank" rel="noopener">https://github.com/QuintGao/GKDubbingDemo</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/lameè½¬åŒ–/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/lameè½¬åŒ–/" class="post-title-link" itemprop="url">é€šè¿‡lame è¿›è¡ŒéŸ³é¢‘æ ¼å¼è½¬åŒ–</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 15:26:39 / Modified: 15:29:07" itemprop="dateCreated datePublished" datetime="2019-04-28T15:26:39+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h3><blockquote>
<p> å› ä¸ºä¸Šä¸€ç¯‡éŸ³é¢‘åˆæˆä¸­é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œåˆæˆå·¥å…·ä¸æ”¯æŒwavéŸ³é¢‘æ ¼å¼è½¬åŒ–ï¼Œè€Œä¸”å½•éŸ³æ‰€å¾—çš„wavæ ¼å¼  æ˜¯æ— æŸçš„æ ¼å¼ï¼Œæ ‡å‡†çš„wavé‡‡æ ·ç‡ä¸º44100Hzï¼Œä¹Ÿæ˜¯CDæ ‡å‡†æ ¼å¼ï¼›mp3å±äºæœ‰æŸå‹ç¼©æ–‡ä»¶ï¼Œä¸è¿‡ä½“ç§¯å°ï¼Œä¾¿äºä¿å­˜ã€‚<br>lame  ä¸‹è½½ä¸‹æ¥ä¸èƒ½ç›´æ¥ç”¨</p>
</blockquote>
<h3 id="ä¾èµ–çš„ä¸œè¥¿-ï¼š"><a href="#ä¾èµ–çš„ä¸œè¥¿-ï¼š" class="headerlink" title="ä¾èµ–çš„ä¸œè¥¿ ï¼š"></a>ä¾èµ–çš„ä¸œè¥¿ ï¼š</h3><p><a href="https://sourceforge.net/projects/lame/files/lame/" target="_blank" rel="noopener">lameåº“ä¸‹è½½åœ°å€</a><br><a href="https://github.com/kewlbear/lame-ios-build" target="_blank" rel="noopener">lame é™æ€åº“æ‰“åŒ…å·¥å…·åœ°å€</a></p>
<h3 id="æ“ä½œæ­¥éª¤ï¼š"><a href="#æ“ä½œæ­¥éª¤ï¼š" class="headerlink" title="æ“ä½œæ­¥éª¤ï¼š"></a>æ“ä½œæ­¥éª¤ï¼š</h3><ul>
<li>æŠŠä¸‹è½½çš„lameå’Œbuild-lame.shæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹</li>
</ul>
<blockquote>
<p>æ³¨æ„ # build-lame.sh ä¸­ #directories SOURCE=â€lameâ€<br>è¿™é‡Œlameæ˜¯æ¥æºæ–‡ä»¶å</p>
<ul>
<li>åœ¨åˆ›å»ºçš„ç›®å½•ä¸‹æ‰§è¡Œ bulid è„šæœ¬ <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./build-lame.sh</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li><p>ä¸‹é¢ fat-lame ä¸­å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿ï¼Œå°†.a æ–‡ä»¶å’Œ.hæ–‡ä»¶æ”¾å…¥é¡¹ç›®å³å¯<br><img src="https://upload-images.jianshu.io/upload_images/2078724-5a3159d4188cdaea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å±å¹•å¿«ç…§ 2019-04-28 ä¸Šåˆ11.02.30.png"></p>
</li>
<li><p>wav è½¬map3 ç›¸å…³ä»£ç </p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">#define AUDIOCACHE @&quot;éŸ³é¢‘å­˜æ”¾ç›®å½•&quot;</span><br><span class="line">æ–‡ä»¶ç®¡ç†</span><br><span class="line">#define FILEMANAGER [NSFileManager defaultManager]</span><br><span class="line"></span><br><span class="line">- (NSString *)documentPath</span><br><span class="line">&#123;</span><br><span class="line">NSString *documentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).lastObject;</span><br><span class="line">return documentPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (NSString *)audioCacheFolder</span><br><span class="line">&#123;</span><br><span class="line">NSString *audioFolder = [[self documentPath] stringByAppendingPathComponent:AUDIOCACHE];</span><br><span class="line">if (![FILEMANAGER fileExistsAtPath:audioFolder]) &#123;</span><br><span class="line">NSError *error = nil;</span><br><span class="line">[FILEMANAGER createDirectoryAtPath:audioFolder withIntermediateDirectories:YES attributes:nil error:&amp;error];</span><br><span class="line">if (error) &#123;</span><br><span class="line">NSLog(@&quot;éŸ³é¢‘æ–‡ä»¶å¤¹åˆ›å»ºå¤±è´¥----%@&quot;, error);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return audioFolder;</span><br><span class="line">&#125;</span><br><span class="line">//ç”¨urlä½œä¸ºæ–‡ä»¶å</span><br><span class="line">- (NSString *)audioFilePath:(NSString *)audioURL</span><br><span class="line">&#123;</span><br><span class="line">NSString *fileName = [audioURL stringByReplacingOccurrencesOfString:@&quot;/&quot; withString:@&quot;-&quot;];</span><br><span class="line">return [[self audioCacheFolder] stringByAppendingPathComponent:fileName];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è½¬åŒ–æ–¹æ³•</span><br><span class="line">- (NSString *)audioPCMtoMP3:(NSString *)wavPath &#123;</span><br><span class="line">NSString *cafFilePath = wavPath;</span><br><span class="line">NSString *mp3FilePath = [self audioFilePath];</span><br><span class="line">if([FILEMANAGER removeItemAtPath:mp3FilePath error:nil])&#123; NSLog(@&quot;åˆ é™¤åŸMP3æ–‡ä»¶&quot;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">@try</span><br><span class="line">&#123;</span><br><span class="line">int read, write;</span><br><span class="line">FILE *pcm = fopen([cafFilePath cStringUsingEncoding:1], &quot;rb&quot;);</span><br><span class="line">//source è¢«è½¬æ¢çš„éŸ³é¢‘æ–‡ä»¶ä½ç½®</span><br><span class="line">fseek(pcm, 4*1024, SEEK_CUR);</span><br><span class="line">//skip file header</span><br><span class="line">FILE *mp3 = fopen([mp3FilePath cStringUsingEncoding:1], &quot;wb&quot;);</span><br><span class="line">//output è¾“å‡ºç”Ÿæˆçš„Mp3æ–‡ä»¶ä½ç½®</span><br><span class="line">const int PCM_SIZE = 8192;</span><br><span class="line">const int MP3_SIZE = 8192;</span><br><span class="line">short int pcm_buffer[PCM_SIZE*2];</span><br><span class="line">unsigned char mp3_buffer[MP3_SIZE];</span><br><span class="line">lame_t lame = lame_init();</span><br><span class="line">//        lame_set_in_samplerate(lame, 22050.0);</span><br><span class="line">lame_set_in_samplerate(lame, 4000.0);</span><br><span class="line">lame_set_VBR(lame, vbr_default); lame_init_params(lame);</span><br><span class="line">do &#123;</span><br><span class="line">read = fread(pcm_buffer, 2*sizeof(short int), PCM_SIZE, pcm);</span><br><span class="line">if (read == 0) write = lame_encode_flush(lame, mp3_buffer, MP3_SIZE);</span><br><span class="line">else write = lame_encode_buffer_interleaved(lame, pcm_buffer, read, mp3_buffer, MP3_SIZE);</span><br><span class="line">fwrite(mp3_buffer, write, 1, mp3);</span><br><span class="line"></span><br><span class="line">&#125;while (read != 0);</span><br><span class="line">lame_close(lame);</span><br><span class="line">fclose(mp3);</span><br><span class="line">fclose(pcm);</span><br><span class="line"></span><br><span class="line">&#125; @catch (NSException *exception) &#123;</span><br><span class="line">NSLog(@&quot;%@&quot;,[exception description]);</span><br><span class="line">return @&quot;&quot;;</span><br><span class="line">&#125; @finally &#123;</span><br><span class="line">return mp3FilePath;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>refer ï¼š <a href="https://www.jianshu.com/p/864a9fbaa79e" target="_blank" rel="noopener">https://www.jianshu.com/p/864a9fbaa79e</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/my-hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/my-hello-world/" class="post-title-link" itemprop="url">ä½¿ç”¨gitlab+fastlaneè¿›è¡Œè‡ªåŠ¨åŒ–æ„å»º</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 14:21:14 / Modified: 15:22:11" itemprop="dateCreated datePublished" datetime="2019-04-28T14:21:14+08:00">2019-04-28</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>æŒç»­é›†æˆä¼˜ç‚¹ï¼š<br>1ã€ç¼©å‡å¼€å‘å‘¨æœŸï¼Œå¿«é€Ÿè¿­ä»£ç‰ˆæœ¬</p>
</blockquote>
<blockquote>
<p>2ã€æä¾›åˆ†å‘æ•ˆç‡ï¼Œæµ‹è¯•äººå‘˜ä»¥åŠç›¸å…³äººå‘˜æ— éœ€ç­‰å¾…å¼€å‘äººå‘˜æ‰“åŒ…</p>
</blockquote>
<blockquote>
<p>3ã€å‡å°‘é‡å¤æ“ä½œï¼Œé«˜æ•ˆæ‰“åŒ…ï¼Œå‡è½»å¼€å‘äººå‘˜å·¥ä½œé‡ã€‚</p>
</blockquote>
<blockquote>
<p>4 . å°†ä»£ç æ¨é€åˆ°æ–°çš„åˆ†æ”¯ï¼ŒCI æœåŠ¡å™¨å°±ä¼šä¸ºæ‚¨è¿è¡Œæµ‹è¯•ã€‚ å¦‚æœ job éƒ½æ˜¯ç»¿è‰² çš„ï¼Œä½ çš„ä»£ç æ˜¯ OK çš„ã€‚</p>
</blockquote>
<blockquote>
<p>5 . å¦‚æœç»™å®šåˆ†æ”¯ä¸­çš„æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯ç»¿è‰²çš„ï¼Œåˆ™å¯ä»¥è®© CI æœåŠ¡å™¨è‡ªåŠ¨å°†ä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚ è¿™å°±æ˜¯æ‰€è°“çš„è¿ç»­éƒ¨ç½²(Continuous Deployment) ã€‚</p>
</blockquote>
<blockquote>
<p>6 . å‡å°‘ code review æ—¶é—´</p>
</blockquote>
<h2 id="æ­å»ºæ–¹æ³•"><a href="#æ­å»ºæ–¹æ³•" class="headerlink" title="æ­å»ºæ–¹æ³•"></a>æ­å»ºæ–¹æ³•</h2><h3 id="è¿è¡Œç¯å¢ƒè¦æ±‚"><a href="#è¿è¡Œç¯å¢ƒè¦æ±‚" class="headerlink" title="è¿è¡Œç¯å¢ƒè¦æ±‚"></a>è¿è¡Œç¯å¢ƒè¦æ±‚</h3><ul>
<li>gitlab</li>
<li>gitlabrunner</li>
<li>fastlane</li>
<li>é’‰é’‰æœºå™¨äºº</li>
</ul>
<h3 id="æ­å»ºæ­¥éª¤"><a href="#æ­å»ºæ­¥éª¤" class="headerlink" title="æ­å»ºæ­¥éª¤"></a>æ­å»ºæ­¥éª¤</h3><h4 id="1-å®‰è£…-gitlab-runner"><a href="#1-å®‰è£…-gitlab-runner" class="headerlink" title="1. å®‰è£… gitlab runner"></a>1. å®‰è£… gitlab runner</h4><ul>
<li>Install GitLab Runner on macOSï¼ˆæˆ‘çš„æ˜¯ mac ç¯å¢ƒæ‰€ä»¥é€‰æ‹©çš„ Install GitLab Runner on macOSï¼‰<br>*1.Download the binary for your system</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo curl --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-darwin-amd64</span><br></pre></td></tr></table></figure>
<ul>
<li>2.Give it permissions to execute:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /usr/local/bin/gitlab-runner</span><br></pre></td></tr></table></figure>
<h4 id="2-æ³¨å†Œ-gitlab-runner"><a href="#2-æ³¨å†Œ-gitlab-runner" class="headerlink" title="2. æ³¨å†Œ gitlab runner"></a>2. æ³¨å†Œ gitlab runner</h4><ul>
<li>To register a Runner under macOS:<br>*1. Run the following command:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-runner register</span><br></pre></td></tr></table></figure>
<ul>
<li>2Enter your GitLab instance URL: ï¼ˆä½  gitlab çš„åœ°å€ï¼‰</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )</span><br><span class="line">https://gitlab.com</span><br></pre></td></tr></table></figure>
<ul>
<li><ol start="3">
<li>Enter the token you obtained to register the Runner:ï¼ˆCI/CD ä¸­é¡¹ç›®çš„ tokenï¼‰</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Please enter the gitlab-ci token for this runner</span><br><span class="line">xxx</span><br></pre></td></tr></table></figure>
<ul>
<li><ol start="4">
<li>Enter a description for the Runner, you can change this later in GitLabâ€™s UI:</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Please enter the gitlab-ci description for this runner</span><br><span class="line">[hostame] my-runner</span><br></pre></td></tr></table></figure>
<ul>
<li><ol start="5">
<li>Enter the <a href="https://docs.gitlab.com/ee/ci/runners/#using-tags" target="_blank" rel="noopener">tags associated with the Runner</a>, you can change this later in GitLabâ€™s UI:</li>
</ol>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Please enter the gitlab-ci tags for this runner (comma separated):</span><br><span class="line">my-tag,another-tag</span><br></pre></td></tr></table></figure>
<ul>
<li>6 Enter the <a href="https://docs.gitlab.com/runner/executors/README.html" target="_blank" rel="noopener">Runner executor</a>:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:</span><br><span class="line">shel</span><br></pre></td></tr></table></figure>
<h4 id="3-ç¼–å†™-yml-æ–‡ä»¶"><a href="#3-ç¼–å†™-yml-æ–‡ä»¶" class="headerlink" title="3. ç¼–å†™ yml æ–‡ä»¶"></a>3. ç¼–å†™ yml æ–‡ä»¶</h4><p><a href="https://docs.gitlab.com/ee/ci/yaml/README.html" target="_blank" rel="noopener">é…ç½®é¡¹ç›®çš„ yml æ–‡ä»¶è¿›è¡Œç›¸åº”çš„ job æ“ä½œ</a><br><a href="https://docs.gitlab.com/ee/ci/yaml/README.html#validate-the-gitlab-ciyml" target="_blank" rel="noopener">æ ¡éªŒ yml æ–‡ä»¶æ˜¯å¦æ­£ç¡®</a><br><a href="https://docs.gitlab.com/runner/commands/README.html#gitlab-runner-exec" target="_blank" rel="noopener">æœ¬åœ°è°ƒè¯• yml æ–‡ä»¶</a><br>å®‰è£… jq è¿™ä¸ªè¾“å‡ºæŠ¥å‘Šçš„æ—¶å€™ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install jq</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æˆ‘çš„ yml æ–‡ä»¶ä»…ä¾›å‚è€ƒ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">//æ„å»ºé˜¶æ®µ</span><br><span class="line">stages:</span><br><span class="line">- build</span><br><span class="line">- buildAndUpload</span><br><span class="line">- failure</span><br><span class="line"></span><br><span class="line">//æ„å»ºå‰é…ç½®</span><br><span class="line">before_script:</span><br><span class="line">- export LANG=en_US.UTF-8</span><br><span class="line">- export FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT=120</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># build for branch test   build and upload to pgyer.</span><br><span class="line">job1:</span><br><span class="line">//æ³¨å†Œ runner tagå å¯ä»¥å¤šä¸ª</span><br><span class="line">tags:</span><br><span class="line">- wangweitags</span><br><span class="line">stage: buildAndUpload</span><br><span class="line">script:</span><br><span class="line"># - sh ./Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;# æ„å»ºæ–°ç‰ˆæœ¬ï¼ˆjustademoï¼‰&quot;</span><br><span class="line">- echo $(pwd)</span><br><span class="line">- echo &quot;build job1&quot;</span><br><span class="line">- pod install</span><br><span class="line">- git reset --hard</span><br><span class="line">// fastlane è‡ªåŠ¨åŒ–æ„å»º</span><br><span class="line">- fastlane dev</span><br><span class="line">// è¾“å‡ºç›¸å…³çš„git commitç­‰ç›¸å…³ä¿¡æ¯</span><br><span class="line">- export pgyerDes=`git log -10 --oneline | cut -d &quot; &quot; -f2- | grep -E &apos;^\[.*|.*finish$&apos;`</span><br><span class="line">- echo $&#123;pgyerDes&#125;</span><br><span class="line">- echo $(pwd)</span><br><span class="line">- echo $(ls)</span><br><span class="line">- export result=$(curl -# -F &quot;file=@../product/LZMDYW.ipa&quot; -F &quot;_api_key=2c34b4faa9e0559667c828f415f7ebee&quot; -F &quot;userKey=1ce44e894fbe779bbf23e75d12c482d8&quot; -F &quot;buildUpdateDescription=$&#123;pgyerDes&#125;&quot;  https://www.pgyer.com/apiv2/app/upload)</span><br><span class="line">- echo $&#123;result&#125; | jq</span><br><span class="line">- export buildKey=`echo $&#123;result&#125; | jq  &apos;. | .data.buildKey&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">buildQRCodeURL=`echo $&#123;result&#125; | jq  &apos;. | .data.buildQRCodeURL&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">buildVersion=`echo $&#123;result&#125; | jq  &apos;. | .data.buildVersion+&quot;(&quot;+.data.buildBuildVersion+&quot;)&quot;&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">buildUpdated=`echo $&#123;result&#125; | jq  &apos;. | .data.buildUpdated&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">change_log=`git log -20 --oneline | cut -d &quot; &quot; -f2- | grep -E &apos;^\[.*|.*finish$&apos; | awk &apos;&#123;&#123;printf&quot;##### %s; \n&quot;,$0&#125;&#125;&apos;`</span><br><span class="line">- export text=&quot;### ç‰ˆæœ¬&quot;$&#123;buildVersion&#125;&quot; \n &gt; æ›´æ–°è®°å½• \n\n &gt; &quot;$&#123;change_log&#125;&quot; \n\n &gt; ![screenshot](&quot;$&#123;buildQRCodeURL&#125;&quot;)\n##### [ä¸‹è½½é“¾æ¥](https://www.pgyer.com/&quot;$&#123;buildKey&#125;&quot;)\n\n###### ä¸Šä¼ æ—¥æœŸ:&quot;$&#123;buildUpdated&#125;&quot;&quot;</span><br><span class="line">//é’‰é’‰è„šæœ¬</span><br><span class="line">- sh ./Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;$text&quot;</span><br><span class="line">only:</span><br><span class="line">- /^test.*$/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># build for branch  only build.</span><br><span class="line">job2:</span><br><span class="line">tags:</span><br><span class="line">- wangweitags</span><br><span class="line">stage: build</span><br><span class="line">script:</span><br><span class="line"># - sh ./Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;# æ„å»ºæ–°ç‰ˆæœ¬ï¼ˆjustademoï¼‰&quot;</span><br><span class="line">- echo $(pwd)</span><br><span class="line">- echo &quot;build job2&quot;</span><br><span class="line">- pod install</span><br><span class="line">- git reset --hard</span><br><span class="line">//fastlen æ„å»º</span><br><span class="line">- fastlane CI_dev</span><br><span class="line">only:</span><br><span class="line">- dev</span><br><span class="line">- master</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># notify when a build has errored</span><br><span class="line">build_failure_job:</span><br><span class="line">tags:</span><br><span class="line">- wangweitags</span><br><span class="line">stage: failure</span><br><span class="line">script:</span><br><span class="line">// ä¸ä¸è„šæœ¬</span><br><span class="line">- sh ../Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;# æ„å»ºå¤±è´¥ï¼ˆLZMDYWï¼‰&quot;</span><br><span class="line">when: on_failure</span><br></pre></td></tr></table></figure>
<h4 id="4-fastlane-æ„å»º"><a href="#4-fastlane-æ„å»º" class="headerlink" title="4. fastlane æ„å»º"></a>4. fastlane æ„å»º</h4><p><a href="https://docs.fastlane.tools/getting-started/ios/setup/" target="_blank" rel="noopener">https://docs.fastlane.tools/getting-started/ios/setup/</a></p>
<h5 id="ï¼ˆ1ï¼‰å®‰è£…-xcode-å‘½ä»¤è¡Œå·¥å…·"><a href="#ï¼ˆ1ï¼‰å®‰è£…-xcode-å‘½ä»¤è¡Œå·¥å…·" class="headerlink" title="ï¼ˆ1ï¼‰å®‰è£… xcode å‘½ä»¤è¡Œå·¥å…·"></a>ï¼ˆ1ï¼‰å®‰è£… xcode å‘½ä»¤è¡Œå·¥å…·</h5><ul>
<li>xcode-select â€“installï¼Œå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œç‚¹å‡»å®‰è£…ã€‚å¦‚æœæç¤º xcode-select: error: command line tools are already installed, use â€œSoftware Updateâ€ to install updates è¡¨ç¤ºå·²ç»å®‰è£…</li>
</ul>
<p>#####ï¼ˆ2ï¼‰ å®‰è£… Fastlane<br>sudo gem install fastlane -NV æˆ–æ˜¯ brew cask install fastlane æˆ‘è¿™é‡Œä½¿ç”¨ gem å®‰è£…çš„<br>å®‰è£…å®Œäº†æ‰§è¡Œ fastlane â€“versionï¼Œç¡®è®¤ä¸‹æ˜¯å¦å®‰è£…å®Œæˆå’Œå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬å·ã€‚</p>
<h5 id="ï¼ˆ3ï¼‰åˆå§‹åŒ–-Fastlane"><a href="#ï¼ˆ3ï¼‰åˆå§‹åŒ–-Fastlane" class="headerlink" title="ï¼ˆ3ï¼‰åˆå§‹åŒ– Fastlane"></a>ï¼ˆ3ï¼‰åˆå§‹åŒ– Fastlane</h5><p>cd åˆ°ä½ çš„é¡¹ç›®ç›®å½•æ‰§è¡Œ<br>fastlane init</p>
<h5 id="ï¼ˆ4ï¼‰æ‰“åŒ…åˆ°è’²å…¬è‹±"><a href="#ï¼ˆ4ï¼‰æ‰“åŒ…åˆ°è’²å…¬è‹±" class="headerlink" title="ï¼ˆ4ï¼‰æ‰“åŒ…åˆ°è’²å…¬è‹±"></a>ï¼ˆ4ï¼‰æ‰“åŒ…åˆ°è’²å…¬è‹±</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastlane add_plugin pgyer</span><br></pre></td></tr></table></figure>
<ul>
<li>è‡ªå·±çš„ fastlane è„šæœ¬</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">default_platform(:ios)</span><br><span class="line"></span><br><span class="line">platform :ios do</span><br><span class="line">desc &quot;Description of what the lane does&quot;</span><br><span class="line"></span><br><span class="line">lane :dev do</span><br><span class="line"></span><br><span class="line">sigh(force: true,</span><br><span class="line">username: &quot;å¼€å‘è€…è´¦å·&quot;,</span><br><span class="line">app_identifier: &quot;bundleid&quot;,</span><br><span class="line">output_path: &apos;.ipaåŒ…è¾“å‡ºè·¯å¾„&apos;,</span><br><span class="line">adhoc: true ï¼ˆæ˜¯å¦adhocï¼‰</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">build_app(</span><br><span class="line">workspace: &quot;XXXX.xcworkspace&quot;,</span><br><span class="line">configuration: &quot;Debug&quot;, ï¼ˆschemeé…ç½®ï¼‰</span><br><span class="line">scheme: &quot;XXXX&quot;,</span><br><span class="line">export_method: &quot;ad-hoc&quot;,</span><br><span class="line">output_directory:&quot;.ipaåŒ…è¾“å‡ºè·¯å¾„&quot;,</span><br><span class="line">include_bitcode:true,</span><br><span class="line">)</span><br><span class="line">// æ‰“åŒ…åˆ°è’²å…¬è‹±</span><br><span class="line">pgyer(</span><br><span class="line">api_key: &quot;&quot;,</span><br><span class="line">user_key: &quot;&quot;,</span><br><span class="line">update_description: &quot;scheme is dev, update by fastlane&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">lane :CI_dev do</span><br><span class="line"></span><br><span class="line">sigh(force: true,</span><br><span class="line">username: &quot;å¼€å‘è€…è´¦å·&quot;,</span><br><span class="line">app_identifier: &quot;bundleid&quot;,</span><br><span class="line">output_path: &apos;.ipaåŒ…è¾“å‡ºè·¯å¾„&apos;,</span><br><span class="line">adhoc: true ï¼ˆæ˜¯å¦adhocï¼‰</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">build_app(</span><br><span class="line">workspace: &quot;XXXX.xcworkspace&quot;,</span><br><span class="line">configuration: &quot;Debug&quot;, ï¼ˆschemeé…ç½®ï¼‰</span><br><span class="line">scheme: &quot;XXXX&quot;,</span><br><span class="line">export_method: &quot;ad-hoc&quot;,</span><br><span class="line">output_directory:&quot;.ipaåŒ…è¾“å‡ºè·¯å¾„&quot;,</span><br><span class="line">include_bitcode:true,</span><br><span class="line">)</span><br><span class="line">end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="5-é’‰é’‰é€šçŸ¥"><a href="#5-é’‰é’‰é€šçŸ¥" class="headerlink" title="5.é’‰é’‰é€šçŸ¥"></a>5.é’‰é’‰é€šçŸ¥</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#! bin/bash</span><br><span class="line">echo $2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">curl &apos; æ”¾è‡ªå·±æ³¨å†Œçš„é’‰é’‰æœºå™¨äººçš„token&apos; \</span><br><span class="line">-H &quot;Content-Type:application/json&quot;  \</span><br><span class="line">-d &quot;&#123; \</span><br><span class="line">markdown:&#123; \</span><br><span class="line">title:&apos;$1&apos;, \</span><br><span class="line">text:&apos;$2&apos; \</span><br><span class="line">&#125;,  \</span><br><span class="line">msgtype:&apos;markdown&apos; \</span><br><span class="line">&#125;&quot;</span><br></pre></td></tr></table></figure>
<h3 id="6-fastlane-æ„å»ºæ³¨æ„äº‹é¡¹ï¼ˆä¸‰å¤©ä¸¤å¤´çš„åŠ æµ‹è¯•æœºï¼Œæ‰‹åŠ¨æ›´æ–°é…ç½®æ–‡ä»¶æ›´æ–°å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œè¦ä¸è€æ˜¯æç¤ºåŒé‡è®¤è¯ï¼‰"><a href="#6-fastlane-æ„å»ºæ³¨æ„äº‹é¡¹ï¼ˆä¸‰å¤©ä¸¤å¤´çš„åŠ æµ‹è¯•æœºï¼Œæ‰‹åŠ¨æ›´æ–°é…ç½®æ–‡ä»¶æ›´æ–°å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œè¦ä¸è€æ˜¯æç¤ºåŒé‡è®¤è¯ï¼‰" class="headerlink" title="6 fastlane æ„å»ºæ³¨æ„äº‹é¡¹ï¼ˆä¸‰å¤©ä¸¤å¤´çš„åŠ æµ‹è¯•æœºï¼Œæ‰‹åŠ¨æ›´æ–°é…ç½®æ–‡ä»¶æ›´æ–°å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œè¦ä¸è€æ˜¯æç¤ºåŒé‡è®¤è¯ï¼‰"></a>6 fastlane æ„å»ºæ³¨æ„äº‹é¡¹ï¼ˆä¸‰å¤©ä¸¤å¤´çš„åŠ æµ‹è¯•æœºï¼Œæ‰‹åŠ¨æ›´æ–°é…ç½®æ–‡ä»¶æ›´æ–°å®åœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œè¦ä¸è€æ˜¯æç¤ºåŒé‡è®¤è¯ï¼‰</h3><p>referï¼š<a href="https://blog.csdn.net/weixin_34293911/article/details/87011860" target="_blank" rel="noopener">https://blog.csdn.net/weixin_34293911/article/details/87011860</a></p>
<ul>
<li>fastlane iOS åŒé‡è®¤è¯ æ›´æ–°é…ç½®æ–‡ä»¶<br>è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°è¿™ä¸ªï¼Œä»–å¯ä»¥è‡ªåŠ¨ç®¡ç†é…ç½®å¼€å‘è€…ç­‰ä¿¡æ¯<br><a href="https://github.com/fastlane/fastlane/tree/master/spaceship" target="_blank" rel="noopener">https://github.com/fastlane/fastlane/tree/master/spaceship</a></li>
<li>è®¿é—® AppleId ç®¡ç†ç«™</li>
<li>æ‰¾åˆ° å®‰å…¨ - App ä¸“ç”¨å¯†ç ï¼Œç”Ÿæˆä¸€ä¸ªä¸“ç”¨å¯†ç </li>
<li>é…ç½®ç¯å¢ƒå˜é‡ vim ~/.bash_profile</li>
<li>export</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD=YOUR_PSD</span><br></pre></td></tr></table></figure>
<ul>
<li>æ‰§è¡Œ fastlane spaceauth -u <a href="mailto:abcd@qq.com" target="_blank" rel="noopener">abcd@qq.com</a> æŒ‰æç¤ºè·å– session ä¿¡æ¯ã€‚</li>
<li>å¤åˆ¶ session ä¿¡æ¯ï¼ˆå¾ˆé•¿ä¸€å¤§æ®µï¼‰ é…ç½®ç¯å¢ƒå˜é‡ vim ~/.bash_profile</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export FASTLANE_SESSION=&apos;YOUR SESSION&apos;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/28/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="wangwei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="https://avatars1.githubusercontent.com/u/32269?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wangwei">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/04/28/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-04-28 11:43:52" itemprop="dateCreated datePublished" datetime="2019-04-28T11:43:52+08:00">2019-04-28</time>
            

            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="https://avatars1.githubusercontent.com/u/32269?v=3&s=460" alt="wangwei">
            
              <p class="site-author-name" itemprop="name">wangwei</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wangwei</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.1.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.0"></script>

  <script src="/js/motion.js?v=7.1.0"></script>



  
  


  <script src="/js/affix.js?v=7.1.0"></script>

  <script src="/js/schemes/pisces.js?v=7.1.0"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.0"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
