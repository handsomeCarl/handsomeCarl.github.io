<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[éŸ³é¢‘æ ¼å¼è½¬åŒ– m4a è½¬ wav]]></title>
    <url>%2F2019%2F04%2F28%2Fm4a-wav%2F</url>
    <content type="text"><![CDATA[è¿˜æ˜¯å› ä¸ºéŸ³é¢‘åˆæˆçš„åŽŸå› ï¼Œåˆæˆçš„éŸ³é¢‘æ˜¯m4a æ ¼å¼ï¼Œä¸Šä¼ åˆ°ä¸ƒç‰›åŽï¼Œå½¢æˆçš„é“¾æŽ¥ï¼Œæµè§ˆå™¨å¯ä»¥æ’­æ”¾ã€‚ä½†æ˜¯æ‰‹æœºä¸è¡Œï¼Œm4a æ˜¯åè§†é¢‘æ ¼å¼ï¼Œç”¨åŽŸæœ‰çš„avplayer æ–¹æ³•ä¸èƒ½æ’­æ”¾ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œè½¬åŒ–åŽä¸Šä¼ æ’­æ”¾ã€‚ ä»£ç å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116-(void)convetM4aToWav:(NSURL *)originalUrldestUrl:(NSString *)destUrlStrcompleted:(void (^)(NSError *error)) completed &#123;NSLog(@&quot;\n\n\nM4A-WAV\n\n\n&quot;);if ([[NSFileManager defaultManager] fileExistsAtPath:destUrlStr]) &#123;[[NSFileManager defaultManager] removeItemAtPath:destUrlStr error:nil];&#125;NSURL *destUrl = [NSURL fileURLWithPath:destUrlStr];AVURLAsset *songAsset = [AVURLAsset URLAssetWithURL:originalUrl options:nil];//è¯»å–åŽŸå§‹æ–‡ä»¶ä¿¡æ¯NSError *error = nil;AVAssetReader *assetReader = [AVAssetReader assetReaderWithAsset:songAsset error:&amp;error];if (error) &#123;NSLog (@&quot;error: %@&quot;, error);completed(error);return;&#125;AVAssetReaderOutput *assetReaderOutput = [AVAssetReaderAudioMixOutputassetReaderAudioMixOutputWithAudioTracks:songAsset.tracksaudioSettings: nil];if (![assetReader canAddOutput:assetReaderOutput]) &#123;NSLog (@&quot;can&apos;t add reader output... die!&quot;);completed(error);return;&#125;[assetReader addOutput:assetReaderOutput];AVAssetWriter *assetWriter = [AVAssetWriter assetWriterWithURL:destUrlfileType:AVFileTypeCoreAudioFormaterror:&amp;error];if (error) &#123;NSLog (@&quot;error: %@&quot;, error);completed(error);return;&#125;AudioChannelLayout channelLayout;memset(&amp;channelLayout, 0, sizeof(AudioChannelLayout));channelLayout.mChannelLayoutTag = kAudioChannelLayoutTag_Stereo;NSDictionary *outputSettings = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey,[NSNumber numberWithFloat:8000], AVSampleRateKey,[NSNumber numberWithInt:2], AVNumberOfChannelsKey,[NSNumber numberWithInt:16], AVLinearPCMBitDepthKey,[NSNumber numberWithBool:NO], AVLinearPCMIsNonInterleaved,[NSNumber numberWithBool:NO],AVLinearPCMIsFloatKey,[NSNumber numberWithBool:NO], AVLinearPCMIsBigEndianKey,nil];AVAssetWriterInput *assetWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeAudiooutputSettings:outputSettings];if ([assetWriter canAddInput:assetWriterInput]) &#123;[assetWriter addInput:assetWriterInput];&#125; else &#123;NSLog (@&quot;can&apos;t add asset writer input... die!&quot;);completed(error);return;&#125;assetWriterInput.expectsMediaDataInRealTime = NO;[assetWriter startWriting];[assetReader startReading];AVAssetTrack *soundTrack = [songAsset.tracks objectAtIndex:0];CMTime startTime = CMTimeMake (0, soundTrack.naturalTimeScale);[assetWriter startSessionAtSourceTime:startTime];__block UInt64 convertedByteCount = 0;dispatch_queue_t mediaInputQueue = dispatch_queue_create(&quot;mediaInputQueue&quot;, NULL);[assetWriterInput requestMediaDataWhenReadyOnQueue:mediaInputQueueusingBlock: ^&#123;while (assetWriterInput.readyForMoreMediaData) &#123;CMSampleBufferRef nextBuffer = [assetReaderOutput copyNextSampleBuffer];if (nextBuffer) &#123;// append buffer[assetWriterInput appendSampleBuffer: nextBuffer];// NSLog (@&quot;appended a buffer (%zu bytes)&quot;,// CMSampleBufferGetTotalSampleSize (nextBuffer));convertedByteCount += CMSampleBufferGetTotalSampleSize (nextBuffer);&#125; else &#123;[assetWriterInput markAsFinished];[assetWriter finishWritingWithCompletionHandler:^&#123;&#125;];[assetReader cancelReading];NSDictionary *outputFileAttributes = [[NSFileManager defaultManager]attributesOfItemAtPath:[destUrl path]error:nil];NSLog (@&quot;FlyElephant %lld&quot;,[outputFileAttributes fileSize]);break;&#125;&#125;NSLog(@&quot;è½¬æ¢ç»“æŸ&quot;);// åˆ é™¤ä¸´æ—¶temprecordAudio.m4aæ–‡ä»¶NSError *removeError = nil;if ([[NSFileManager defaultManager] fileExistsAtPath:[originalUrl path]]) &#123;BOOL success = [[NSFileManager defaultManager] removeItemAtPath:[originalUrl path] error:&amp;removeError];if (!success) &#123;NSLog(@&quot;åˆ é™¤ä¸´æ—¶temprecordAudio.m4aæ–‡ä»¶å¤±è´¥:%@&quot;,removeError);completed(removeError);&#125;else&#123;NSLog(@&quot;åˆ é™¤ä¸´æ—¶temprecordAudio.m4aæ–‡ä»¶:%@æˆåŠŸ&quot;,originalUrl);completed(removeError);&#125;&#125;else &#123;NSLog(@&quot;æ–‡ä»¶ä¸å­˜åœ¨&quot;);&#125;&#125;];&#125; æ–‡æ¡£ç›®å½•ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š12345678910111213141516171819202122232425- (NSString *)documentPath&#123;NSString *documentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).lastObject;return documentPath;&#125;- (NSString *)audioCacheFolder&#123;NSString *audioFolder = [[self documentPath] stringByAppendingPathComponent:AUDIOCACHE];if (![FILEMANAGER fileExistsAtPath:audioFolder]) &#123;NSError *error = nil;[FILEMANAGER createDirectoryAtPath:audioFolder withIntermediateDirectories:YES attributes:nil error:&amp;error];if (error) &#123;NSLog(@&quot;éŸ³é¢‘æ–‡ä»¶å¤¹åˆ›å»ºå¤±è´¥----%@&quot;, error);&#125;&#125;return audioFolder;&#125;//ç”¨urlä½œä¸ºæ–‡ä»¶å- (NSString *)audioFilePath:(NSString *)audioURL&#123;NSString *fileName = [audioURL stringByReplacingOccurrencesOfString:@&quot;/&quot; withString:@&quot;-&quot;];return [[self audioCacheFolder] stringByAppendingPathComponent:fileName];&#125;]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é€šè¿‡lame è¿›è¡ŒéŸ³é¢‘æ ¼å¼è½¬åŒ–]]></title>
    <url>%2F2019%2F04%2F08%2Flame%E8%BD%AC%E5%8C%96%2F</url>
    <content type="text"><![CDATA[èƒŒæ™¯ å› ä¸ºä¸Šä¸€ç¯‡éŸ³é¢‘åˆæˆä¸­é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œåˆæˆå·¥å…·ä¸æ”¯æŒwavéŸ³é¢‘æ ¼å¼è½¬åŒ–ï¼Œè€Œä¸”å½•éŸ³æ‰€å¾—çš„wavæ ¼å¼ æ˜¯æ— æŸçš„æ ¼å¼ï¼Œæ ‡å‡†çš„wavé‡‡æ ·çŽ‡ä¸º44100Hzï¼Œä¹Ÿæ˜¯CDæ ‡å‡†æ ¼å¼ï¼›mp3å±žäºŽæœ‰æŸåŽ‹ç¼©æ–‡ä»¶ï¼Œä¸è¿‡ä½“ç§¯å°ï¼Œä¾¿äºŽä¿å­˜ã€‚lame ä¸‹è½½ä¸‹æ¥ä¸èƒ½ç›´æŽ¥ç”¨ ä¾èµ–çš„ä¸œè¥¿ ï¼šlameåº“ä¸‹è½½åœ°å€lame é™æ€åº“æ‰“åŒ…å·¥å…·åœ°å€ æ“ä½œæ­¥éª¤ï¼š æŠŠä¸‹è½½çš„lameå’Œbuild-lame.shæ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹ æ³¨æ„ # build-lame.sh ä¸­ #directories SOURCE=â€lameâ€è¿™é‡Œlameæ˜¯æ¥æºæ–‡ä»¶å åœ¨åˆ›å»ºçš„ç›®å½•ä¸‹æ‰§è¡Œ bulid è„šæœ¬ 1sudo ./build-lame.sh ä¸‹é¢ fat-lame ä¸­å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿ï¼Œå°†.a æ–‡ä»¶å’Œ.hæ–‡ä»¶æ”¾å…¥é¡¹ç›®å³å¯ wav è½¬map3 ç›¸å…³ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374#define AUDIOCACHE @&quot;éŸ³é¢‘å­˜æ”¾ç›®å½•&quot;æ–‡ä»¶ç®¡ç†#define FILEMANAGER [NSFileManager defaultManager]- (NSString *)documentPath&#123;NSString *documentPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES).lastObject;return documentPath;&#125;- (NSString *)audioCacheFolder&#123;NSString *audioFolder = [[self documentPath] stringByAppendingPathComponent:AUDIOCACHE];if (![FILEMANAGER fileExistsAtPath:audioFolder]) &#123;NSError *error = nil;[FILEMANAGER createDirectoryAtPath:audioFolder withIntermediateDirectories:YES attributes:nil error:&amp;error];if (error) &#123;NSLog(@&quot;éŸ³é¢‘æ–‡ä»¶å¤¹åˆ›å»ºå¤±è´¥----%@&quot;, error);&#125;&#125;return audioFolder;&#125;//ç”¨urlä½œä¸ºæ–‡ä»¶å- (NSString *)audioFilePath:(NSString *)audioURL&#123;NSString *fileName = [audioURL stringByReplacingOccurrencesOfString:@&quot;/&quot; withString:@&quot;-&quot;];return [[self audioCacheFolder] stringByAppendingPathComponent:fileName];&#125;//è½¬åŒ–æ–¹æ³•- (NSString *)audioPCMtoMP3:(NSString *)wavPath &#123;NSString *cafFilePath = wavPath;NSString *mp3FilePath = [self audioFilePath];if([FILEMANAGER removeItemAtPath:mp3FilePath error:nil])&#123; NSLog(@&quot;åˆ é™¤åŽŸMP3æ–‡ä»¶&quot;);&#125;@try&#123;int read, write;FILE *pcm = fopen([cafFilePath cStringUsingEncoding:1], &quot;rb&quot;);//source è¢«è½¬æ¢çš„éŸ³é¢‘æ–‡ä»¶ä½ç½®fseek(pcm, 4*1024, SEEK_CUR);//skip file headerFILE *mp3 = fopen([mp3FilePath cStringUsingEncoding:1], &quot;wb&quot;);//output è¾“å‡ºç”Ÿæˆçš„Mp3æ–‡ä»¶ä½ç½®const int PCM_SIZE = 8192;const int MP3_SIZE = 8192;short int pcm_buffer[PCM_SIZE*2];unsigned char mp3_buffer[MP3_SIZE];lame_t lame = lame_init();// lame_set_in_samplerate(lame, 22050.0);lame_set_in_samplerate(lame, 4000.0);lame_set_VBR(lame, vbr_default); lame_init_params(lame);do &#123;read = fread(pcm_buffer, 2*sizeof(short int), PCM_SIZE, pcm);if (read == 0) write = lame_encode_flush(lame, mp3_buffer, MP3_SIZE);else write = lame_encode_buffer_interleaved(lame, pcm_buffer, read, mp3_buffer, MP3_SIZE);fwrite(mp3_buffer, write, 1, mp3);&#125;while (read != 0);lame_close(lame);fclose(mp3);fclose(pcm);&#125; @catch (NSException *exception) &#123;NSLog(@&quot;%@&quot;,[exception description]);return @&quot;&quot;;&#125; @finally &#123;return mp3FilePath;&#125;&#125; refer ï¼š https://www.jianshu.com/p/864a9fbaa79e]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>éŸ³è§†é¢‘</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨gitlab+fastlaneè¿›è¡Œè‡ªåŠ¨åŒ–æž„å»º]]></title>
    <url>%2F2019%2F03%2F29%2Fmy-hello-world%2F</url>
    <content type="text"><![CDATA[æŒç»­é›†æˆä¼˜ç‚¹ï¼š1ã€ç¼©å‡å¼€å‘å‘¨æœŸï¼Œå¿«é€Ÿè¿­ä»£ç‰ˆæœ¬ 2ã€æä¾›åˆ†å‘æ•ˆçŽ‡ï¼Œæµ‹è¯•äººå‘˜ä»¥åŠç›¸å…³äººå‘˜æ— éœ€ç­‰å¾…å¼€å‘äººå‘˜æ‰“åŒ… 3ã€å‡å°‘é‡å¤æ“ä½œï¼Œé«˜æ•ˆæ‰“åŒ…ï¼Œå‡è½»å¼€å‘äººå‘˜å·¥ä½œé‡ã€‚ 4 . å°†ä»£ç æŽ¨é€åˆ°æ–°çš„åˆ†æ”¯ï¼ŒCI æœåŠ¡å™¨å°±ä¼šä¸ºæ‚¨è¿è¡Œæµ‹è¯•ã€‚ å¦‚æžœ job éƒ½æ˜¯ç»¿è‰² çš„ï¼Œä½ çš„ä»£ç æ˜¯ OK çš„ã€‚ 5 . å¦‚æžœç»™å®šåˆ†æ”¯ä¸­çš„æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯ç»¿è‰²çš„ï¼Œåˆ™å¯ä»¥è®© CI æœåŠ¡å™¨è‡ªåŠ¨å°†ä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§çŽ¯å¢ƒä¸­ã€‚ è¿™å°±æ˜¯æ‰€è°“çš„è¿žç»­éƒ¨ç½²(Continuous Deployment) ã€‚ 6 . å‡å°‘ code review æ—¶é—´ æ­å»ºæ–¹æ³•è¿è¡ŒçŽ¯å¢ƒè¦æ±‚ gitlab gitlabrunner fastlane é’‰é’‰æœºå™¨äºº æ­å»ºæ­¥éª¤1. å®‰è£… gitlab runner Install GitLab Runner on macOSï¼ˆæˆ‘çš„æ˜¯ mac çŽ¯å¢ƒæ‰€ä»¥é€‰æ‹©çš„ Install GitLab Runner on macOSï¼‰*1.Download the binary for your system 1sudo curl --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-darwin-amd64 2.Give it permissions to execute: 1sudo chmod +x /usr/local/bin/gitlab-runner 2. æ³¨å†Œ gitlab runner To register a Runner under macOS:*1. Run the following command: 1gitlab-runner register 2Enter your GitLab instance URL: ï¼ˆä½  gitlab çš„åœ°å€ï¼‰ 12Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )https://gitlab.com Enter the token you obtained to register the Runner:ï¼ˆCI/CD ä¸­é¡¹ç›®çš„ tokenï¼‰ 12Please enter the gitlab-ci token for this runnerxxx Enter a description for the Runner, you can change this later in GitLabâ€™s UI: 12Please enter the gitlab-ci description for this runner[hostame] my-runner Enter the tags associated with the Runner, you can change this later in GitLabâ€™s UI: 12Please enter the gitlab-ci tags for this runner (comma separated):my-tag,another-tag 6 Enter the Runner executor: 12Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:shel 3. ç¼–å†™ yml æ–‡ä»¶é…ç½®é¡¹ç›®çš„ yml æ–‡ä»¶è¿›è¡Œç›¸åº”çš„ job æ“ä½œæ ¡éªŒ yml æ–‡ä»¶æ˜¯å¦æ­£ç¡®æœ¬åœ°è°ƒè¯• yml æ–‡ä»¶å®‰è£… jq è¿™ä¸ªè¾“å‡ºæŠ¥å‘Šçš„æ—¶å€™ç”¨ 1brew install jq ä¸‹é¢æ˜¯æˆ‘çš„ yml æ–‡ä»¶ä»…ä¾›å‚è€ƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//æž„å»ºé˜¶æ®µstages:- build- buildAndUpload- failure//æž„å»ºå‰é…ç½®before_script:- export LANG=en_US.UTF-8- export FASTLANE_XCODEBUILD_SETTINGS_TIMEOUT=120# build for branch test build and upload to pgyer.job1://æ³¨å†Œ runner tagå å¯ä»¥å¤šä¸ªtags:- wangweitagsstage: buildAndUploadscript:# - sh ./Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;# æž„å»ºæ–°ç‰ˆæœ¬ï¼ˆjustademoï¼‰&quot;- echo $(pwd)- echo &quot;build job1&quot;- pod install- git reset --hard// fastlane è‡ªåŠ¨åŒ–æž„å»º- fastlane dev// è¾“å‡ºç›¸å…³çš„git commitç­‰ç›¸å…³ä¿¡æ¯- export pgyerDes=`git log -10 --oneline | cut -d &quot; &quot; -f2- | grep -E &apos;^\[.*|.*finish$&apos;`- echo $&#123;pgyerDes&#125;- echo $(pwd)- echo $(ls)- export result=$(curl -# -F &quot;file=@../product/LZMDYW.ipa&quot; -F &quot;_api_key=2c34b4faa9e0559667c828f415f7ebee&quot; -F &quot;userKey=1ce44e894fbe779bbf23e75d12c482d8&quot; -F &quot;buildUpdateDescription=$&#123;pgyerDes&#125;&quot; https://www.pgyer.com/apiv2/app/upload)- echo $&#123;result&#125; | jq- export buildKey=`echo $&#123;result&#125; | jq &apos;. | .data.buildKey&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`buildQRCodeURL=`echo $&#123;result&#125; | jq &apos;. | .data.buildQRCodeURL&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`buildVersion=`echo $&#123;result&#125; | jq &apos;. | .data.buildVersion+&quot;(&quot;+.data.buildBuildVersion+&quot;)&quot;&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`buildUpdated=`echo $&#123;result&#125; | jq &apos;. | .data.buildUpdated&apos; | awk -F &apos;&quot;&apos; &apos;&#123;print $2&#125;&apos;`change_log=`git log -20 --oneline | cut -d &quot; &quot; -f2- | grep -E &apos;^\[.*|.*finish$&apos; | awk &apos;&#123;&#123;printf&quot;##### %s; \n&quot;,$0&#125;&#125;&apos;`- export text=&quot;### ç‰ˆæœ¬&quot;$&#123;buildVersion&#125;&quot; \n &gt; æ›´æ–°è®°å½• \n\n &gt; &quot;$&#123;change_log&#125;&quot; \n\n &gt; ![screenshot](&quot;$&#123;buildQRCodeURL&#125;&quot;)\n##### [ä¸‹è½½é“¾æŽ¥](https://www.pgyer.com/&quot;$&#123;buildKey&#125;&quot;)\n\n###### ä¸Šä¼ æ—¥æœŸ:&quot;$&#123;buildUpdated&#125;&quot;&quot;//é’‰é’‰è„šæœ¬- sh ./Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;$text&quot;only:- /^test.*$/# build for branch only build.job2:tags:- wangweitagsstage: buildscript:# - sh ./Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;# æž„å»ºæ–°ç‰ˆæœ¬ï¼ˆjustademoï¼‰&quot;- echo $(pwd)- echo &quot;build job2&quot;- pod install- git reset --hard//fastlen æž„å»º- fastlane CI_devonly:- dev- master# notify when a build has erroredbuild_failure_job:tags:- wangweitagsstage: failurescript:// ä¸ä¸è„šæœ¬- sh ../Shell/dingtalk.sh &quot;æ–°ç‰ˆæœ¬&quot; &quot;# æž„å»ºå¤±è´¥ï¼ˆLZMDYWï¼‰&quot;when: on_failure 4. fastlane æž„å»ºhttps://docs.fastlane.tools/getting-started/ios/setup/ ï¼ˆ1ï¼‰å®‰è£… xcode å‘½ä»¤è¡Œå·¥å…· xcode-select â€“installï¼Œå¦‚æžœæ²¡æœ‰å®‰è£…ï¼Œä¼šå¼¹å‡ºå¯¹è¯æ¡†ï¼Œç‚¹å‡»å®‰è£…ã€‚å¦‚æžœæç¤º xcode-select: error: command line tools are already installed, use â€œSoftware Updateâ€ to install updates è¡¨ç¤ºå·²ç»å®‰è£… #####ï¼ˆ2ï¼‰ å®‰è£… Fastlanesudo gem install fastlane -NV æˆ–æ˜¯ brew cask install fastlane æˆ‘è¿™é‡Œä½¿ç”¨ gem å®‰è£…çš„å®‰è£…å®Œäº†æ‰§è¡Œ fastlane â€“versionï¼Œç¡®è®¤ä¸‹æ˜¯å¦å®‰è£…å®Œæˆå’Œå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬å·ã€‚ ï¼ˆ3ï¼‰åˆå§‹åŒ– Fastlanecd åˆ°ä½ çš„é¡¹ç›®ç›®å½•æ‰§è¡Œfastlane init ï¼ˆ4ï¼‰æ‰“åŒ…åˆ°è’²å…¬è‹±1fastlane add_plugin pgyer è‡ªå·±çš„ fastlane è„šæœ¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051default_platform(:ios)platform :ios dodesc &quot;Description of what the lane does&quot;lane :dev dosigh(force: true,username: &quot;å¼€å‘è€…è´¦å·&quot;,app_identifier: &quot;bundleid&quot;,output_path: &apos;.ipaåŒ…è¾“å‡ºè·¯å¾„&apos;,adhoc: true ï¼ˆæ˜¯å¦adhocï¼‰)build_app(workspace: &quot;XXXX.xcworkspace&quot;,configuration: &quot;Debug&quot;, ï¼ˆschemeé…ç½®ï¼‰scheme: &quot;XXXX&quot;,export_method: &quot;ad-hoc&quot;,output_directory:&quot;.ipaåŒ…è¾“å‡ºè·¯å¾„&quot;,include_bitcode:true,)// æ‰“åŒ…åˆ°è’²å…¬è‹±pgyer(api_key: &quot;&quot;,user_key: &quot;&quot;,update_description: &quot;scheme is dev, update by fastlane&quot;)endlane :CI_dev dosigh(force: true,username: &quot;å¼€å‘è€…è´¦å·&quot;,app_identifier: &quot;bundleid&quot;,output_path: &apos;.ipaåŒ…è¾“å‡ºè·¯å¾„&apos;,adhoc: true ï¼ˆæ˜¯å¦adhocï¼‰)build_app(workspace: &quot;XXXX.xcworkspace&quot;,configuration: &quot;Debug&quot;, ï¼ˆschemeé…ç½®ï¼‰scheme: &quot;XXXX&quot;,export_method: &quot;ad-hoc&quot;,output_directory:&quot;.ipaåŒ…è¾“å‡ºè·¯å¾„&quot;,include_bitcode:true,)endend 5.é’‰é’‰é€šçŸ¥12345678910111213#! bin/bashecho $2curl &apos; æ”¾è‡ªå·±æ³¨å†Œçš„é’‰é’‰æœºå™¨äººçš„token&apos; \-H &quot;Content-Type:application/json&quot; \-d &quot;&#123; \markdown:&#123; \title:&apos;$1&apos;, \text:&apos;$2&apos; \&#125;, \msgtype:&apos;markdown&apos; \&#125;&quot; 6 fastlane æž„å»ºæ³¨æ„äº‹é¡¹ï¼ˆä¸‰å¤©ä¸¤å¤´çš„åŠ æµ‹è¯•æœºï¼Œæ‰‹åŠ¨æ›´æ–°é…ç½®æ–‡ä»¶æ›´æ–°å®žåœ¨æ˜¯å¤ªéº»çƒ¦äº†ï¼Œè¦ä¸è€æ˜¯æç¤ºåŒé‡è®¤è¯ï¼‰referï¼šhttps://blog.csdn.net/weixin_34293911/article/details/87011860 fastlane iOS åŒé‡è®¤è¯ æ›´æ–°é…ç½®æ–‡ä»¶è¿™ä¸ªæ—¶å€™å°±ç”¨åˆ°è¿™ä¸ªï¼Œä»–å¯ä»¥è‡ªåŠ¨ç®¡ç†é…ç½®å¼€å‘è€…ç­‰ä¿¡æ¯https://github.com/fastlane/fastlane/tree/master/spaceship è®¿é—® AppleId ç®¡ç†ç«™ æ‰¾åˆ° å®‰å…¨ - App ä¸“ç”¨å¯†ç ï¼Œç”Ÿæˆä¸€ä¸ªä¸“ç”¨å¯†ç  é…ç½®çŽ¯å¢ƒå˜é‡ vim ~/.bash_profile export 1FASTLANE_APPLE_APPLICATION_SPECIFIC_PASSWORD=YOUR_PSD æ‰§è¡Œ fastlane spaceauth -u abcd@qq.com æŒ‰æç¤ºèŽ·å– session ä¿¡æ¯ã€‚ å¤åˆ¶ session ä¿¡æ¯ï¼ˆå¾ˆé•¿ä¸€å¤§æ®µï¼‰ é…ç½®çŽ¯å¢ƒå˜é‡ vim ~/.bash_profile 1export FASTLANE_SESSION=&apos;YOUR SESSION&apos;]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>è‡ªåŠ¨åŒ–æž„å»º</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSéŸ³é¢‘åˆå¹¶çš„å¤šç§æ–¹å¼]]></title>
    <url>%2F2019%2F03%2F28%2Faduiomix%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åœ¨åšéŸ³é¢‘åˆå¹¶è¿™å—éœ€æ±‚ï¼Œç„¶åŽé‡è§äº†å‡ ç§å½¢å¼ï¼Œè¿™é‡Œåšä¸€ä¸ªæ€»ç»“ã€‚ ç¬¬ä¸€ç§ å¯ç½‘ç»œå¯æœ¬åœ° ï¼Œå¯è°ƒæ•´éŸ³é‡ï¼ŒèŒƒå›´ç­‰ å®šåˆ¶åŒ–è¿˜æ¯”è¾ƒé«˜ 1.åŸºæœ¬ç±»ä»‹ç»referï¼šhttps://docs.microsoft.com/en-us/dotnet/api/avfoundation.avcomposition?view=xamarin-ios-sdk-12 AVAsset åª’ä½“ä¿¡æ¯ AVURLAsset æ ¹æ®URLè·¯å¾„åˆ›å»ºçš„åª’ä½“ä¿¡æ¯ AVAssetTrack èµ„æºè½¨é“ï¼ŒåŒ…æ‹¬éŸ³é¢‘è½¨é“å’Œè§†é¢‘è½¨é“ AVMutableAudioMixInputParameterséŸ³é¢‘æ“ä½œå‚æ•° AVMutableComposition ç»§æ‰¿è‡ªAVCompositionï¼Œç”¨äºŽä»ŽçŽ°æœ‰Assetåˆ›å»ºæ–°åˆæˆçš„å¯å˜å¯¹è±¡ã€‚åŒ…å«å¤šä¸ªè½¨é“çš„åª’ä½“ä¿¡æ¯ï¼Œå¯ä»¥æ·»åŠ ã€åˆ é™¤è½¨é“ AVAssetExportSession å¯¼å‡º å…·ä½“å®žçŽ°å¦‚ä¸‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798#pragma mark - éŸ³é¢‘ä¸ŽéŸ³é¢‘çš„åˆå¹¶+ (void)mixOriginalAudio:(NSURL *)originalAudioPathoriginalAudioVolume:(float)originalAudioVolumebgAudioPath:(NSURL *)bgAudioPathbgAudioVolume:(float)bgAudioVolumeoutPutFileName:(NSString *)fileNamecompletionBlock:(CompletionBlock)completionBlock&#123;if (originalAudioPath == nil) &#123;return;&#125;if (bgAudioPath == nil) &#123;return;&#125;if (originalAudioVolume &gt; 1.0) &#123;originalAudioVolume = 1.0f;&#125;if (originalAudioVolume &lt; 0) &#123;originalAudioVolume = 0.0f;&#125;if (bgAudioVolume &gt; 1.0) &#123;bgAudioVolume = 1.0f;&#125;if (bgAudioVolume &lt; 0) &#123;bgAudioVolume = 0.0f;&#125;dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;AVURLAsset *originalAudioAsset = [AVURLAsset assetWithURL:originalAudioPath];AVURLAsset *bgAudioAsset = [AVURLAsset assetWithURL:bgAudioPath];AVMutableComposition *compostion = [AVMutableComposition composition];AVMutableCompositionTrack *originalAudio = [compostion addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:0];[originalAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, originalAudioAsset.duration) ofTrack:[originalAudioAsset tracksWithMediaType:AVMediaTypeAudio].firstObject atTime:kCMTimeZero error:nil];AVMutableCompositionTrack *bgAudio = [compostion addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:0];[bgAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, originalAudioAsset.duration) ofTrack:[bgAudioAsset tracksWithMediaType:AVMediaTypeAudio].firstObject atTime:kCMTimeZero error:nil];//æ’­æ”¾é€ŸçŽ‡ä¼šå—å½±å“NSUInteger originalAudioAssetTotalSeconds = CMTimeGetSeconds(originalAudioAsset.duration);NSUInteger bgAudioAssetTotalSeconds = CMTimeGetSeconds(bgAudioAsset.duration);if (originalAudioAssetTotalSeconds&gt;bgAudioAssetTotalSeconds) &#123;[bgAudio scaleTimeRange:CMTimeRangeMake(kCMTimeZero, bgAudioAsset.duration) toDuration:originalAudioAsset.duration];&#125;/** å¾—åˆ°å¯¹åº”è½¨é“ä¸­çš„éŸ³é¢‘å£°éŸ³ä¿¡æ¯ï¼Œå¹¶æ›´æ”¹ */AVMutableAudioMixInputParameters *originalAudioParameters = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:originalAudio];[originalAudioParameters setVolume:originalAudioVolume atTime:kCMTimeZero];AVMutableAudioMixInputParameters *bgAudioParameters = [AVMutableAudioMixInputParameters audioMixInputParametersWithTrack:bgAudio];[bgAudioParameters setVolume:bgAudioVolume atTime:kCMTimeZero];/** èµ‹ç»™å¯¹åº”çš„ç±» */AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];audioMix.inputParameters = @[ originalAudioParameters, bgAudioParameters ];AVAssetExportSession *session = [[AVAssetExportSession alloc] initWithAsset:compostion presetName:AVAssetExportPresetAppleM4A];/** è®¾ç½®è¾“å‡ºè·¯å¾„ */NSURL *outputPath = [self exporterAudioPathWithFileName:fileName];session.audioMix = audioMix;session.outputURL = outputPath;session.outputFileType = AVFileTypeAppleM4A;session.shouldOptimizeForNetworkUse = YES;[session exportAsynchronouslyWithCompletionHandler:^&#123;dispatch_async(dispatch_get_main_queue(), ^&#123;switch ([session status]) &#123;case AVAssetExportSessionStatusFailed: &#123;NSLog(@&quot;åˆæˆå¤±è´¥ï¼š%@&quot;, [[session error] description]);completionBlock(NO, outputPath);&#125; break;case AVAssetExportSessionStatusCancelled: &#123;completionBlock(NO, outputPath);&#125; break;case AVAssetExportSessionStatusCompleted: &#123;completionBlock(YES, outputPath);&#125; break;default: &#123;completionBlock(NO, outputPath);&#125; break;&#125;&#125;);&#125;];&#125;);&#125; âš ï¸åŽ‹ç¼©æ—¶é•¿ æ›´æ”¹ç»™å®šæ—¶é—´èŒƒå›´å†…æ‰€æœ‰è½¨é“çš„æ—¶é•¿ã€‚123456- (void)scaleTimeRange:(CMTimeRange)timeRangetoDuration:(CMTime)duration;å‚æ•°timeRange:è¦ç¼©æ”¾çš„åˆæˆè½¨é“çš„æ—¶é—´èŒƒå›´ã€‚å‚æ•°duration:æ–°çš„æ—¶é•¿ã€‚å—ç¼©æ”¾æ“ä½œå½±å“çš„æ¯ä¸ªè½¨é“æ®µå°†ä»¥ç­‰äºŽå…¶ç»“æžœæ—¶é—´æ˜ å°„çš„source.duration/target.durationçš„é€ŸçŽ‡å‘ˆçŽ°ã€‚ âš ï¸è®¾ç½®èƒŒæ™¯éŸ³ä¹æ—¶é•¿å’Œæ’å…¥æ—¶é—´12[bgAudio insertTimeRange:CMTimeRangeMake(kCMTimeZero, originalAudioAsset.duration) ofTrack:[bgAudioAsset tracksWithMediaType:AVMediaTypeAudio].firstObject atTime:kCMTimeZero error:nil];å› ä¸ºæˆ‘çš„éœ€æ±‚æ˜¯åŠ å…¥èƒŒæ™¯éŸ³ä¹ç»™å½•éŸ³ï¼Œæ‰€ä»¥å°†èƒŒæ™¯éŸ³ä¹ä»Žå¤´æ’å…¥kCMTimeZero æ’å…¥æ—¶é•¿ä¸ºå½•éŸ³çš„æ—¶é•¿ originalAudioAsset.duration âš ï¸æ³¨æ„å¯¼å‡ºæ ¼å¼é¦–å…ˆæ˜¯è¾“å‡ºè·¯å¾„,åˆ‡è®°åˆ‡è®°è¿™é‡Œçš„åŽç¼€ä¸€å®šè¦å’Œä¸Šé¢é€‰æ‹©çš„å‘¼åº”,æ¯”å¦‚æˆ‘å†™çš„æ ¼å¼ä¸ºAVAssetExportPresetAppleM4Aé‚£ä¹ˆæˆ‘çš„æ–‡ä»¶åŽç¼€å°±éœ€è¦ä¸º.m4a,å¦‚æžœç”¨.MP3è¿™ç§çš„è¯æ˜¯æ— æ³•æ­£ç¡®ç”Ÿæˆå‡ºæ–‡ä»¶çš„,æœ‰å¯èƒ½ä¼šå‡ºçŽ°ç©ºæ–‡ä»¶çš„å­˜åœ¨.ä¸€å®šè¦æ³¨æ„!!! âš ï¸ä¼ å…¥ç½‘ç»œé“¾æŽ¥çš„æ—¶å€™ éœ€è¦å°†ç½‘ç»œé“¾æŽ¥ä¸‹è½½ä¸‹æ¥è½¬æˆæœ¬åœ°è·¯å¾„è¿›è¡Œä¼ å…¥ã€‚referï¼š https://github.com/Anny-github/AudioPlayerManager ç¬¬äºŒç§ æœ¬åœ°éŸ³é¢‘åˆå¹¶ï¼Œå¯ä»¥è°ƒæ•´éŸ³é‡https://github.com/daybreak1024/ZLMMixAudio ç¬¬ä¸‰ç§ å¯ä»¥ç½‘ç»œæˆ–è€…æœ¬åœ°åˆå¹¶ï¼Œä½†æ˜¯æ— æ³•å®šåˆ¶åŒ–ï¼Œå› ä¸ºç”¨çš„åˆ«äººçš„é™æ€åº“ðŸ˜¢https://github.com/QuintGao/GKDubbingDemo]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>mix</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[UItouchäº‹ä»¶è¢«tableviewæ‹¦æˆª]]></title>
    <url>%2F2019%2F02%2F20%2Fuitouch%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘åšé¡¹ç›®ç”¨åˆ°äº†æ‰‹å†™ç­¾åçš„åŠŸèƒ½ï¼Œæ‰‹å†™ç­¾åçš„viewæ˜¯é€šè¿‡UItouchç›¸å…³æ–¹æ³•ç”»çº¿å®žçŽ°çš„ï¼Œå› ä¸ºé¡µé¢UIæ˜¯åˆ—è¡¨å½¢å¼ï¼Œæ‰‹å†™ç­¾åview éœ€è¦æ·»åŠ åˆ°tableviewçš„footviewä¸Šï¼Œè¿™ä¸ªæ—¶å€™å°±å‡ºçŽ°äº†é—®é¢˜ï¼Œæ‰‹å†™ç­¾åviewçš„touchè¢«tableviewæ‹¦æˆªäº†ï¼Œè¿™ä¸ªæ—¶å€™å†åŽ»æ“ä½œview ç­¾åçš„æ—¶å€™ æ˜¯ä¸èƒ½æˆåŠŸå‘¢ï¼Œè€Œä¸”é¡µé¢ä¼šæ»šåŠ¨ã€‚ ä¸‹é¢æˆ‘è®°å½•ä¸€ä¸‹æˆ‘çš„å¤„ç†æ–¹å¼1.ä¸€å¼€å§‹æˆ‘ä»¥ä¸ºåƒç½‘ä¸Šçš„æ–¹å¼ï¼Œç»™tableviewåˆ›å»ºä¸€ä¸ªå­ç±»ç„¶åŽå¼•å…¥touch æ–¹æ³•ï¼šrefer https://blog.csdn.net/qq_42839789/article/details/81501832ä½†æ˜¯viewçš„touch ä¼šè¦†ç›–tableviewtouch å¹¶ä¸èƒ½è§£å†³é—®é¢˜ã€‚2.è¿™ä¸ªæ—¶å€™æˆ‘æƒ³åˆ°hittest æ–¹æ³•é€šè¿‡äº‹ä»¶å“åº”æœºåˆ¶ï¼Œåˆ¤æ–­è§¦æ‘¸çš„viewæ˜¯ä¸æ˜¯ç­¾åview å¦‚æžœæ˜¯è®©tableviewæš‚æ—¶åœæ­¢æ»šåŠ¨ï¼Œå¦‚æžœä¸æ˜¯æ­£å¸¸æ»šåŠ¨ã€‚å…·ä½“å®žçŽ°å¦‚ä¸‹ï¼š123456789101112131415161718192021222324#import &lt;UIKit/UIKit.h&gt;@interface WYTouchTableView : UITableView@end#import &quot;WYTouchTableView.h&quot;#import &quot;HJSignatureView.h&quot;@implementation WYTouchTableView- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event&#123;UIView *viewReturn =[super hitTest:point withEvent:event];//åœ¨touchViewåŒºåŸŸif ([viewReturn isKindOfClass:[HJSignatureView class]]) &#123;self.scrollEnabled = NO;return viewReturn;&#125;else&#123;self.scrollEnabled = YES;&#125;//ä¸åœ¨touchViewåŒºåŸŸï¼Œæ­£å¸¸æ“ä½œreturn viewReturn;&#125;@end]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>someBug</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ›å»ºé™æ€ç§æœ‰åº“]]></title>
    <url>%2F2019%2F01%2F28%2F%E9%9D%99%E6%80%81%E5%BA%93%2F</url>
    <content type="text"><![CDATA[åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ä»‹ç»äº†Cocoapodsç§æœ‰åº“çš„åˆ›å»ºæœ‰äº›æ—¶å€™æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åˆ«äººå¼•ç”¨å’±ä»¬çš„åº“çš„æ—¶å€™çœ‹è§æˆ‘ä»¬çš„ç›¸å…³å®žçŽ°ä»£ç ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å°†ç›¸å…³ä»£ç ï¼Œæ‰“æˆé™æ€åº“ã€‚ç¬¬ä¸€ .aå’Œ.framworkçš„åŒºåˆ«ï¼šiOSé™æ€åº“å½¢å¼å’ŒåŠ¨æ€åº“å½¢å¼ï¼šé™æ€åº“ï¼š.aå’Œ.frameworkåŠ¨æ€åº“ï¼š.dylibå’Œ.framework.aæ˜¯ä¸€ä¸ªçº¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ.frameworkä¸­é™¤äº†æœ‰äºŒè¿›åˆ¶æ–‡ä»¶å¤–è¿˜æœ‰èµ„æºæ–‡ä»¶ã€‚.aæ–‡ä»¶ä¸èƒ½ç›´æŽ¥ä½¿ç”¨ï¼Œè‡³å°‘è¦æœ‰.hæ–‡ä»¶é…åˆï¼Œ.frameworkæ–‡ä»¶å¯ä»¥ç›´æŽ¥ä½¿ç”¨ã€‚.a + .h + sourceFile = .frameworkç¬¬äºŒ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼è¿›è¡Œé™æ€åº“çš„æ‰“åŒ…ï¼Œ1æ˜¯æ‰‹åŠ¨æ‰“åŒ…æ¯”è¾ƒéº»çƒ¦ï¼Œç½‘ä¸Šæœ‰å¥½å¤šç›¸å…³æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†2å‘½ä»¤è¡Œæ‰“åŒ…ï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œä¸€æ¡å‘½ä»¤å³å¯1ï¼‰å®‰è£…æ‰“åŒ…æ’ä»¶ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤sudo gem install cocoapods-packager2ï¼‰è¿›å…¥ç§æœ‰åº“ç›®å½• ç„¶åŽå°†æºç å¯¼å…¥classes ç›®å½•ä¸‹ ç„¶åŽæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤pod package demo.podspec â€“library â€“forceå…¶ä¸­â€“libraryæŒ‡å®šæ‰“åŒ…æˆ.aæ–‡ä»¶ï¼Œå¦‚æžœä¸å¸¦ä¸Šå°†ä¼šæ‰“åŒ…æˆ.frameworkæ–‡ä»¶ã€‚â€“forceæ˜¯æŒ‡å¼ºåˆ¶è¦†ç›–ã€‚è¿™ä¸ªæ—¶å€™ç›®å½•ä¸‹ä¼šå¤šå‡ºä¸€ä¸ªæ–‡ä»¶å¤¹ç„¶åŽå°†frameworkæ–‡ä»¶å¤åˆ¶åˆ°aesEncrypts/Framework/ä¸‹é¢ç¬¬ä¸‰ é…ç½®ç›¸å…³ç§æœ‰åº“ä¿¡æ¯1ï¼‰å°†ç›¸å…³frameworkå¯¼å…¥ç§æœ‰åº“ç›®å½•ä¸‹2ï¼‰é…ç½®specæ–‡ä»¶ ç®¡ç†.frameworkè·Ÿç®¡ç†.aç±»ä¼¼ï¼ŒåŒæ ·æ˜¯ç”Ÿæˆé€šç”¨frameworkã€‚åªä¸è¿‡podspecæœ‰ç‚¹ä¸åŒã€‚.aæ˜¯s.vendored_librariesï¼Œ.frameworkæ˜¯s.vendored_frameworksã€‚3ï¼‰.tagæ ‡è®°,å¹¶ä¸”ä¸Šä¼ 123/// ç¬¬ä¸€æ¬¡éœ€è¦åœ¨å‰é¢åŠ ä¸€ä¸ªvgit tag &quot;v1.0.0&quot;git push --tags 6.éªŒè¯.podspec æ–¹å¼ä¸€// åŠ ä¸Šâ€“verboseéªŒè¯å¤±è´¥ä¼šæ˜¾ç¤ºè¯¦ç»†çš„æŠ¥é”™ä¿¡æ¯pod spec lint aesEncrypts.podspec â€“verboseæ–¹å¼äºŒpod spec lint7.å‘å¸ƒè‡ªå·±çš„.podspecåˆ°cocoapodspod trunk push aesEncrypts.podspecå¦‚æžœæœ‰è­¦å‘Šç”¨:pod trunk push aesEncrypts.podspec â€“allow-warnings æ³¨æ„ï¼šæ³¨æ„cocopods ç‰ˆæœ¬ ä¸è¦ç”¨beta ç‰ˆæœ¬è¿›è¡Œåˆ›å»ºï¼Œè¦ä¸lib éªŒè¯å¯ä»¥é€šè¿‡ï¼Œä½†æ˜¯spec æ–¹å¼éªŒè¯ä¼šå‡ºé”™ã€‚pod specç›¸å¯¹äºŽpod lib ä¼šæ›´ä¸ºç²¾ç¡®ï¼Œpod libç›¸å½“äºŽåªéªŒè¯ä¸€ä¸ªæœ¬åœ°ä»“åº“ï¼Œpod specä¼šåŒæ—¶éªŒè¯æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ã€‚ å¦‚æžœspecæ–‡ä»¶ä¸é€šè¿‡ï¼Œspec æ–‡ä»¶æ˜¯ä¸èƒ½ä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>.a</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åˆ›å»ºcocopodsç§æœ‰åº“]]></title>
    <url>%2F2019%2F01%2F18%2FcocopodKu%2F</url>
    <content type="text"><![CDATA[é€šå¸¸æˆ‘ä»¬é¡¹ç›®ä¸­éƒ½æœ‰ä¸€äº›å…¬å…±çš„ç»„ä»¶éœ€è¦æŠ½ç¦»å‡ºæ¥ï¼Œå‡å°‘ä¾èµ–ï¼Œä»Šå¤©è·Ÿå¤§å®¶ä»‹ç»çš„å°±æ˜¯æ€Žä¹ˆé€šè¿‡cocopodsåˆ›å»ºç§æœ‰åº“ï¼Œå¼•å…¥åˆ°é¡¹ç›®ä¸­ä¾›å¤§å®¶ä½¿ç”¨ã€‚ä¸€ é¦–å…ˆè¦æ˜Žç™½ä¸¤ä¸ªæ¦‚å¿µ:1.code repositoryæ˜¯ä»£ç åº“ã€‚2.spec repositoryæ˜¯é…ç½®ä»“åº“ï¼Œæ‰€æœ‰çš„é…ç½®æŒ‰ç…§åŒ…åã€æºåœ°å€ï¼Œç›¸å…³ä¾èµ–çš„å­˜æ”¾åœ¨è¿™ä¸ªä»“åº“ã€‚è¿™ä¸ªä»“åº“åªç”¨æ¥å­˜æ”¾podspecæ–‡ä»¶ï¼Œä¸å­˜æ”¾ä»£ç ã€‚äºŒ åˆ›å»ºcocopodsä»“åº“ç›¸å…³æ­¥éª¤ï¼š1.åœ¨æœ¬åœ°åˆ›å»ºlibä»“åº“pod lib create podsDemoSdk1ï¼‰ç›¸å…³ç›®å½•ç»“æž„å¦‚ä¸‹ï¼š2ï¼‰åˆ›å»ºæ—¶å€™ç›¸å…³ä¿¡æ¯å¦‚ä¸‹ï¼š å°†æœ¬åœ°ä»“åº“å…³è”åˆ°è¿œç«¯gitä»“åº“ æˆ‘ä»¬ç”¨çš„æ˜¯gitlab åˆ›å»ºçš„gitä»“åº“1ï¼‰git add . #ä¸ä½†å¯ä»¥[è·Ÿå•]æ–‡ä»¶ï¼Œè¿˜å¯ä»¥è·Ÿé€šé…ç¬¦ï¼Œæ›´å¯ä»¥è·Ÿç›®å½•ã€‚ä¸€ä¸ªç‚¹å°±æŠŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰æœªè¿½è¸ªçš„æ–‡ä»¶å…¨éƒ¨addäº†ï¼Œæ³¨æ„ç©ºæ ¼2ï¼‰git commit -m â€œæ³¨é‡Šâ€ #æŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“3ï¼‰git remote add origin è¿œç¨‹ä»“åº“åœ°å€ #æœ¬åœ°å…³è”è¿œç¨‹ä»“åº“4ï¼‰git push -u origin master #æŠŠæœ¬åœ°åº“çš„æ‰€æœ‰å†…å®¹æŽ¨é€åˆ°è¿œç¨‹åº“ä¸Šï¼ˆç¬¬ä¸€æ¬¡éœ€è¦åŠ -uï¼ŒåŽé¢å°±ä¸ç”¨åŠ äº†ï¼‰ å°†ç›¸å…³sdk ä»£ç æ”¾åœ¨ podsDemoSdk/Classes ç›®å½•ä¸‹4.é…ç½®ç›¸å…³spec æ–‡ä»¶é…ç½®ç›¸å…³è¿œç¨‹ä»“åº“åœ°å€å’Œç›¸å…³å†…å®¹ï¼ŒæŒ‰ç€å›¾ä¸­æ ¼å¼é…å°±è¡Œäº†ã€‚ éªŒè¯podspecçš„æœ‰æ•ˆæ€§ï¼Œæ‰“å¼€ç»ˆç«¯ cd åˆ°podsDemoSdkçš„ç›®å½•ä¸­æŽ¥ç€è¿è¡Œpod lib lintå¦‚æžœæœ‰è­¦å‘Šï¼Œä¼šå¯¼è‡´æ— æ³•é€šè¿‡ï¼Œéœ€è¦æ·»åŠ â€“allow-warningså¦‚æžœä½¿ç”¨äº†cå‡½æ•°ç›¸å…³çš„ï¼Œéœ€è¦æ·»åŠ â€“use-librariesæ˜¾ç¤ºpass å­—çœ¼ éªŒè¯é€šè¿‡åŽï¼ŒæŠŠä»£ç æäº¤åˆ°ä»“åº“å³å¯5.æŠŠä»£ç æäº¤åˆ°ä»“åº“å³å¯git add -Agit commit -m â€œadd pod filesâ€git remote add origin è¿œç¨‹ä»“åº“ //è¿žæŽ¥è¿œç¨‹githubé¡¹ç›®git tag â€˜0.1.0â€™ //è¿™é‡Œçš„ç‰ˆæœ¬å·æ³¨æ„è¦å’Œpodspecæ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ç»Ÿä¸€git push â€“tags //å°†æœ¬åœ°tagæ›´æ–°åˆ°githubé¡¹ç›®ä¸ŠåŽ»git push origin master //å°†æœ¬åœ°é¡¹ç›®æ›´æ–°åˆ°githubé¡¹ç›®ä¸ŠåŽ» åˆ›å»ºä¸€ä¸ªspecç§æœ‰ä»“åº“çŽ°åœ¨GitLabä¸Šé¢åˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“ï¼Œç”¨æ¥å­˜æ”¾ç§æœ‰ä¾èµ–ä»£ç åº“çš„é…ç½®åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ï¼špod repo add podsDemoSpecs specä»“åº“åœ°å€ ä¹Ÿå°±æ˜¯åœ¨~/.cocoapods/repoç›®å½•ä¸‹æ·»åŠ äº†ä¸€ä¸ªä»¥ä½ çš„ç§æœ‰repoä¸ºåçš„æ–‡ä»¶å¤¹ çŽ°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åœ¨æœ¬åœ°å¾—åˆ°æˆ‘ä»¬è‡ªå·±çš„ç§æœ‰ä»“åº“ podsDemoSpecs ï¼Œè¿™æ˜¯ä¸€ä¸ªç©ºçš„ä»“åº“ 7.å…³è”ä»£ç åº“å’Œé…ç½®ä»“åº“pod repo push podsDemoSpecs podsDemoSdk.podspec â€“use-libraries â€“allow-warnings è‡³æ­¤ä»“åº“å·²ç»åˆ›å»ºå®Œæˆ ä¸‰ï¼Œä¸‹é¢æ˜¯åœ¨é¡¹ç›®ä¸­çš„åº”ç”¨ï¼Œç›´æŽ¥åœ¨podfileæ–‡ä»¶ä¸­é…ç½®ç›¸å…³ä¿¡æ¯å°±å¥½ï¼Œpod installå³å¯ è°¢è°¢ï¼Œå¦‚æžœä¸è¶³ï¼Œè¯·æŒ‡æ­£è°¢è°¢!]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>ç»„ä»¶åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç»“åˆfastlane ç»„ä»¶è¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•]]></title>
    <url>%2F2018%2F12%2F28%2Ffastlane-test%2F</url>
    <content type="text"><![CDATA[1.Xcodeåˆ›å»ºä¸€ä¸ªå«æœ‰Unit Testsçš„é¡¹ç›®1ï¼‰å•å…ƒæµ‹è¯•targetè®¾ç½®infoä¸­æ·»åŠ testsï¼Œoptionsä¸­å‹¾é€‰Gather coverageæ¡†ã€‚xcode9.2å’Œxcode9.3ä½ç½®ä¸å¤ªä¸€æ ·ï¼Œä¸‹é¢çš„å›¾ç‰‡æ˜¯xcode9.3çš„é…ç½® è¿™ä¸ªæ˜¯æµ‹è¦†ç›–çŽ‡ç”¨çš„2.å®‰è£…fastlane1ï¼‰sudo gem install fastlane -NVæˆ–æ˜¯brew cask install fastlaneæˆ‘è¿™é‡Œä½¿ç”¨gemå®‰è£…çš„2ï¼‰å®‰è£…å®Œäº†æ‰§è¡Œfastlane â€“versionï¼Œç¡®è®¤ä¸‹æ˜¯å¦å®‰è£…å®Œæˆå’Œå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬å·ã€‚ã€&gt;3.åˆå§‹åŒ–Fastlane1ï¼‰cdåˆ°ä½ çš„é¡¹ç›®ç›®å½•æ‰§è¡Œ2ï¼‰fastlane initåˆå§‹åŒ–æˆåŠŸåŽä¼šåœ¨å½“å‰å·¥ç¨‹ç›®å½•ç”Ÿæˆä¸€ä¸ªfastlaneæ–‡ä»¶å¤¹Appfileä¸»è¦å­˜æ”¾Appçš„apple_id team_id app_identifierç­‰ä¿¡æ¯Deliverfileä¸­ä¸ºå‘å¸ƒçš„é…ç½®ä¿¡æ¯ï¼Œä¸€èˆ¬æƒ…å†µç”¨ä¸åˆ°ã€‚Fastfileæ˜¯æˆ‘ä»¬æœ€åº”è¯¥å…³æ³¨çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬çš„å·¥ä½œæ–‡ä»¶ã€‚4) æ·»åŠ ç»„ä»¶fastlane add_plugin xcpretty_report ç”¨äºŽç”Ÿæˆæµ‹è¯•æŠ¥å‘Š5ï¼‰é…ç½®Fastfileç›¸å…³ä¿¡æ¯`default_platform(:ios) platform :ios do desc â€œè‡ªåŠ¨åŒ–æµ‹è¯•â€ lane :unittest doUI.message(â€œstart xcodebuildâ€)xcodebuild(test: true,scheme: â€œquickDemoâ€,workspace: â€œquickDemo.xcworkspaceâ€,destination: â€œplatform=iOS Simulator,name=iPhone XR,OS=12.1â€,)UI.message(â€œsuccess xcodebuildâ€) xcpretty_report(buildlog_path: â€˜fastlaneâ€™,output_path: â€˜fastlane/reportsâ€™,use_json_formatter: true) gym(xcpretty_report_html:â€tests.htmlâ€,)UI.message(â€œstart xcovâ€)xcov(scheme: â€œquickDemoâ€,workspace: â€œquickDemo.xcworkspaceâ€,html_report: â€œtrueâ€,json_report: â€œtrueâ€,output_directory:â€quickDemoesssâ€)UI.message(â€œsuccess xcovâ€) desc â€œè¯»å–è¦†ç›–çŽ‡â€file = File.read(File.expand_path(â€œ/Users/edz/Desktop/quickDemo/quickDemoesss/report.jsonâ€))if filedata = JSON.parse(file)UI.message(data)UI.message(data[â€œcoverageâ€])elseUI.error(â€œUnable to open file!â€)returnendend end` 6 æ‰§è¡Œ fastlane unittest]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>è‡ªåŠ¨åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[xcode10å‘ã€‘ç”¨xcode10 æ‰“åŒ…ä¸Šä¼ åˆ°AppStoreï¼ŒiOS9 Crash]]></title>
    <url>%2F2018%2F11%2F28%2Fxcode10%2F</url>
    <content type="text"><![CDATA[ç”¨Xcode10 æ‰“åŒ…ä¸Šä¼ åˆ°AppStoreï¼ŒiOS9ç³»ç»Ÿçš„æœºå™¨é¢‘ç¹ Crash; è¿˜æ˜¯è€è€å®žå®žç”¨Xcode 9.4.1æ‰“åŒ…å§ï¼Œå‘æ­»äº†ã€‚xcode10.1ä¼šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>someBug</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[multiple commands produce '' æ—¥å¸¸errorè®°è½½]]></title>
    <url>%2F2018%2F10%2F28%2Fmuitiple-error%2F</url>
    <content type="text"><![CDATA[ä¸‹è½½åˆ«äººdemo æˆ–è€…æ—¥å¸¸å†™é¡¹ç›®ä¸­ä¼šé‡åˆ°ç±»ä¼¼å¦‚ä¸‹çš„bugï¼š è¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œåˆ é™¤info.plist ç„¶åŽcommand+R å…è®¸å³å¯ å®Œç¾Žï¼š]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>someBug</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xcode 10 æ‰“åŒ…å¯¼å‡ºæ—¶æŠ¥é”™Failed to verify bitcode in]]></title>
    <url>%2F2018%2F09%2F28%2FxcodeBug%2F</url>
    <content type="text"><![CDATA[ä½œä¸ºiOSå¼€å‘è€…,æ–°çš„å¼€å‘å·¥å…·æ­£å¼å‘å¸ƒæ—¶å®šç„¶è¦åŠæ—¶æ›´æ–°ï¼Œä½†ä¸å¹¸çš„æ˜¯æœ‰å¥½å¤šå‘ã€‚è¿™æ˜¯å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒéš¾é‡è§çš„å‘ï¼Œå…¶ä»–çš„åœ¨ç½‘ä¸Šæ¯”è¾ƒå¥½æ‰¾ï¼Œå°±ä¸ä¸€ä¸€åˆ—å‡ºäº†ã€‚å½“æ‰“åŒ…å¯¼å‡ºçš„æ—¶å€™ï¼Œæç¤ºé”™è¯¯å¦‚ä¸‹ï¼š Failed to verify bitcode in AipBase.framework/AipBase: error: Cannot extract bundle from /var/folders/n2/2hc63w0d555cdbpqxwmpy84w0000gn/T/XcodeDistPipeline.ujv/Root/Payload/DDGD.app/Frameworks/AipBase.framework/AipBase (i386) æ–¹æ³•ä¸€ï¼š è¿™æ˜¯å› ä¸ºcode æ–°çš„build Systemé€ æˆçš„ï¼Œä¸€ä¸ªé¿å…å»¶è¯¯å¼€å‘æ‰“åŒ…çš„æ–¹æ³•å±•ç¤ºç»™å¤§å®¶ï¼šè¿›å…¥xcode -file-workSpace settings ï¼š é€‰æ‹© legacy build System é‡æ–°æ‰“åŒ…å¯¼å‡ºè§£å†³é—®é¢˜ã€‚ æ–¹æ³•äºŒï¼šä¸ºäº†æ–¹ä¾¿å¼€å‘è€…è°ƒè¯•ï¼ŒAipBase.frameworkåˆå¹¶äº†æ¨¡æ‹Ÿå™¨å’ŒçœŸæœºæž¶æž„ï¼Œä¸Šçº¿å‰ï¼Œä½¿ç”¨lipoå·¥å…·ç§»é™¤ç›¸å…³æž¶æž„å³å¯ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªè§£å†³çš„æ¯”è¾ƒå½»åº•ï¼Œå»ºè®®ç”¨è¿™ä¸ªæ–¹æ³•ï¼š cd lib ä½¿ç”¨lipo -info å¯ä»¥æŸ¥çœ‹åŒ…å«çš„æž¶æž„lipo -info AipBase.framework/AipBase # Architectures in the fat file: AipBase are: i386 x86_64 armv7 armv7s arm64 # ç§»é™¤x86_64, i386 lipo -remove x86_64 AipBase.framework/AipBase -o AipBase.framework/AipBase lipo -remove i386 AipBase.framework/AipBase -o AipBase.framework/AipBase lipo -remove x86_64 AipOcrSdk.framework/AipOcrSdk -o AipOcrSdk.framework/AipOcrSdk lipo -remove i386 AipOcrSdk.framework/AipOcrSdk -o AipOcrSdk.framework/AipOcrSdk # å†æ¬¡æŸ¥çœ‹ lipo -info AipBase.framework/AipBase # Architectures in the fat file: AipBase are: armv7 armv7s arm64]]></content>
      <categories>
        <category>IOS</category>
      </categories>
      <tags>
        <tag>someBug</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F04%2F28%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>hexo</category>
      </categories>
  </entry>
</search>
